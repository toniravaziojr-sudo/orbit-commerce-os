// =============================================
// BLOCK REGISTRY - Central registry of all blocks
// =============================================

import type { BlockCategory, BlockDefinition, BlockNode } from './types';

// Block definitions
const blockDefinitions: BlockDefinition[] = [
  // ========== LAYOUT BLOCKS ==========
  {
    type: 'Page',
    label: 'P√°gina',
    category: 'layout',
    icon: 'FileText',
    defaultProps: {
      backgroundColor: 'transparent',
      padding: 'none',
    },
    propsSchema: {
      backgroundColor: {
        type: 'color',
        label: 'Cor de Fundo',
        defaultValue: 'transparent',
      },
      padding: {
        type: 'select',
        label: 'Espa√ßamento',
        defaultValue: 'none',
        options: [
          { label: 'Nenhum', value: 'none' },
          { label: 'Pequeno', value: 'sm' },
          { label: 'M√©dio', value: 'md' },
          { label: 'Grande', value: 'lg' },
        ],
      },
    },
    canHaveChildren: true,
    isRemovable: false,
  },
  {
    type: 'Section',
    label: 'Se√ß√£o',
    category: 'layout',
    icon: 'LayoutDashboard',
    defaultProps: {
      backgroundColor: 'transparent',
      paddingX: 16,
      paddingY: 32,
      marginTop: 0,
      marginBottom: 0,
      gap: 16,
      alignItems: 'stretch',
      fullWidth: false,
    },
    propsSchema: {
      backgroundColor: {
        type: 'color',
        label: 'Cor de Fundo',
        defaultValue: 'transparent',
      },
      paddingX: {
        type: 'number',
        label: 'Padding Horizontal (px)',
        defaultValue: 16,
        min: 0,
        max: 100,
      },
      paddingY: {
        type: 'number',
        label: 'Padding Vertical (px)',
        defaultValue: 32,
        min: 0,
        max: 200,
      },
      marginTop: {
        type: 'number',
        label: 'Margem Superior (px)',
        defaultValue: 0,
        min: 0,
        max: 200,
      },
      marginBottom: {
        type: 'number',
        label: 'Margem Inferior (px)',
        defaultValue: 0,
        min: 0,
        max: 200,
      },
      gap: {
        type: 'number',
        label: 'Espa√ßo entre Itens (px)',
        defaultValue: 16,
        min: 0,
        max: 100,
      },
      alignItems: {
        type: 'select',
        label: 'Alinhamento Vertical',
        defaultValue: 'stretch',
        options: [
          { label: 'Esticar', value: 'stretch' },
          { label: 'In√≠cio', value: 'flex-start' },
          { label: 'Centro', value: 'center' },
          { label: 'Fim', value: 'flex-end' },
        ],
      },
      fullWidth: {
        type: 'boolean',
        label: 'Largura Total',
        defaultValue: false,
      },
    },
    canHaveChildren: true,
  },
  {
    type: 'Container',
    label: 'Container',
    category: 'layout',
    icon: 'Square',
    defaultProps: {
      maxWidth: 'lg',
      padding: 16,
      marginTop: 0,
      marginBottom: 0,
      gap: 16,
    },
    propsSchema: {
      maxWidth: {
        type: 'select',
        label: 'Largura M√°xima',
        defaultValue: 'lg',
        options: [
          { label: 'Pequeno (640px)', value: 'sm' },
          { label: 'M√©dio (768px)', value: 'md' },
          { label: 'Grande (1024px)', value: 'lg' },
          { label: 'Extra Grande (1280px)', value: 'xl' },
          { label: 'Total', value: 'full' },
        ],
      },
      padding: {
        type: 'number',
        label: 'Padding (px)',
        defaultValue: 16,
        min: 0,
        max: 100,
      },
      marginTop: {
        type: 'number',
        label: 'Margem Superior (px)',
        defaultValue: 0,
        min: 0,
        max: 200,
      },
      marginBottom: {
        type: 'number',
        label: 'Margem Inferior (px)',
        defaultValue: 0,
        min: 0,
        max: 200,
      },
      gap: {
        type: 'number',
        label: 'Espa√ßo entre Itens (px)',
        defaultValue: 16,
        min: 0,
        max: 100,
      },
    },
    canHaveChildren: true,
  },
  {
    type: 'Columns',
    label: 'Colunas',
    category: 'layout',
    icon: 'Columns',
    defaultProps: {
      columns: 2,
      gap: 16,
      stackOnMobile: true,
      alignItems: 'stretch',
    },
    propsSchema: {
      columns: {
        type: 'select',
        label: 'N√∫mero de Colunas',
        defaultValue: '2',
        options: [
          { label: '2 Colunas', value: '2' },
          { label: '3 Colunas', value: '3' },
          { label: '4 Colunas', value: '4' },
        ],
      },
      gap: {
        type: 'number',
        label: 'Espa√ßamento (px)',
        defaultValue: 16,
        min: 0,
        max: 100,
      },
      stackOnMobile: {
        type: 'boolean',
        label: 'Empilhar no Mobile',
        defaultValue: true,
      },
      alignItems: {
        type: 'select',
        label: 'Alinhamento Vertical',
        defaultValue: 'stretch',
        options: [
          { label: 'Esticar', value: 'stretch' },
          { label: 'In√≠cio', value: 'flex-start' },
          { label: 'Centro', value: 'center' },
          { label: 'Fim', value: 'flex-end' },
        ],
      },
    },
    canHaveChildren: true,
    slotConstraints: { maxChildren: 4 },
  },
  {
    type: 'Divider',
    label: 'Divisor',
    category: 'layout',
    icon: 'Minus',
    defaultProps: {
      style: 'solid',
      color: '#e5e7eb',
    },
    propsSchema: {
      style: {
        type: 'select',
        label: 'Estilo',
        defaultValue: 'solid',
        options: [
          { label: 'S√≥lido', value: 'solid' },
          { label: 'Tracejado', value: 'dashed' },
          { label: 'Pontilhado', value: 'dotted' },
        ],
      },
      color: {
        type: 'color',
        label: 'Cor',
        defaultValue: '#e5e7eb',
      },
    },
    canHaveChildren: false,
  },
  {
    type: 'Spacer',
    label: 'Espa√ßador',
    category: 'layout',
    icon: 'MoveVertical',
    defaultProps: {
      height: 'md',
    },
    propsSchema: {
      height: {
        type: 'select',
        label: 'Altura',
        defaultValue: 'md',
        options: [
          { label: 'Extra Pequeno', value: 'xs' },
          { label: 'Pequeno', value: 'sm' },
          { label: 'M√©dio', value: 'md' },
          { label: 'Grande', value: 'lg' },
          { label: 'Extra Grande', value: 'xl' },
        ],
      },
    },
    canHaveChildren: false,
  },

  // ========== HEADER / FOOTER BLOCKS ==========
  {
    type: 'Header',
    label: 'Cabe√ßalho',
    category: 'header-footer',
    icon: 'PanelTop',
    defaultProps: {
      menuId: '',
      showSearch: true,
      showCart: true,
      sticky: true,
      // Estilo do cabe√ßalho (Yampi)
      headerStyle: 'logo_left_menu_inline',
      headerBgColor: '',
      headerTextColor: '',
      headerIconColor: '',
      // Cores do menu (para estilos "menu abaixo")
      menuBgColor: '',
      menuTextColor: '',
      // Sticky mobile
      stickyOnMobile: true,
      // Contato no cabe√ßalho
      showWhatsApp: false,
      whatsAppNumber: '',
      whatsAppLabel: '',
      showPhone: false,
      phoneNumber: '',
      phoneLabel: '',
      // REMOVIDO: Categorias no cabe√ßalho (menu vem do Menu Builder)
      // √Årea do Cliente
      customerAreaEnabled: false,
      customerAreaLabel: 'Minhas compras',
      // Promo√ß√µes em Destaque
      featuredPromosEnabled: false,
      featuredPromosLabel: 'Promo√ß√µes',
      featuredPromosTextColor: '#d97706',
      featuredPromosPageId: '',
      featuredPromosPageSlug: '', // Legacy support
      // Barra Superior (Aviso Geral)
      noticeEnabled: false,
      noticeText: '',
      noticeBgColor: '', // Empty = inherits from theme primary color
      noticeTextColor: '#ffffff',
      noticeAnimation: 'fade',
      // Barra Superior - a√ß√£o
      noticeActionEnabled: false,
      noticeActionLabel: '',
      noticeActionUrl: '',
      noticeActionTarget: '_self',
      noticeActionTextColor: '',
    },
    propsSchema: {
      // === ESTILO DO CABE√áALHO ===
      headerStyle: {
        type: 'select',
        label: 'Estilo do Cabe√ßalho',
        defaultValue: 'logo_left_menu_inline',
        options: [
          { label: 'Logo √† esquerda, menu ao lado', value: 'logo_left_menu_inline' },
          { label: 'Logo √† esquerda, menu abaixo', value: 'logo_left_menu_below' },
          { label: 'Logo centralizado, menu abaixo', value: 'logo_center_menu_below' },
        ],
      },
      // === CORES DO CABE√áALHO ===
      headerBgColor: {
        type: 'color',
        label: 'Cor de Fundo',
        placeholder: 'Padr√£o do tema',
      },
      headerTextColor: {
        type: 'color',
        label: 'Cor do Texto',
        placeholder: 'Padr√£o do tema',
      },
      headerIconColor: {
        type: 'color',
        label: 'Cor dos √çcones',
        placeholder: 'Padr√£o do tema',
      },
      // === CORES DO MENU (para estilos "menu abaixo") ===
      menuBgColor: {
        type: 'color',
        label: 'Cor de Fundo do Menu',
        placeholder: 'Mesmo do cabe√ßalho',
      },
      menuTextColor: {
        type: 'color',
        label: 'Cor do Texto do Menu',
        placeholder: 'Mesmo do cabe√ßalho',
      },
      // === CONFIGURA√á√ïES GERAIS ===
      stickyOnMobile: {
        type: 'boolean',
        label: 'Fixar ao rolar (Mobile)',
        defaultValue: true,
      },
      sticky: {
        type: 'boolean',
        label: 'Fixo no Topo (Desktop)',
        defaultValue: true,
      },
      menuId: {
        type: 'menu',
        label: 'Menu',
        placeholder: 'Selecione um menu',
      },
      showSearch: {
        type: 'boolean',
        label: 'Mostrar Busca',
        defaultValue: true,
      },
      showCart: {
        type: 'boolean',
        label: 'Mostrar Carrinho',
        defaultValue: true,
      },
      // === CONTATO NO CABE√áALHO ===
      showWhatsApp: {
        type: 'boolean',
        label: 'Mostrar WhatsApp',
        defaultValue: false,
      },
      whatsAppNumber: {
        type: 'string',
        label: 'N√∫mero do WhatsApp',
        placeholder: 'Ex: 5511999999999',
      },
      whatsAppLabel: {
        type: 'string',
        label: 'Texto do WhatsApp (opcional)',
        placeholder: 'Ex: WhatsApp',
      },
      showPhone: {
        type: 'boolean',
        label: 'Mostrar Telefone',
        defaultValue: false,
      },
      phoneNumber: {
        type: 'string',
        label: 'N√∫mero do Telefone',
        placeholder: 'Ex: +55 (11) 99999-9999',
      },
      phoneLabel: {
        type: 'string',
        label: 'Texto do Telefone (opcional)',
        placeholder: 'Ex: Atendimento',
      },
      // REMOVIDO: Categorias no cabe√ßalho (menu vem do Menu Builder)
      // === √ÅREA DO CLIENTE ===
      customerAreaEnabled: {
        type: 'boolean',
        label: 'Exibir "Minhas compras"',
        defaultValue: false,
      },
      customerAreaLabel: {
        type: 'string',
        label: 'Texto do link',
        defaultValue: 'Minhas compras',
        placeholder: 'Ex: Minhas compras',
      },
      // === PROMO√á√ïES EM DESTAQUE ===
      featuredPromosEnabled: {
        type: 'boolean',
        label: 'Exibir link de Promo√ß√µes',
        defaultValue: false,
      },
      featuredPromosLabel: {
        type: 'string',
        label: 'Texto do link',
        defaultValue: 'Promo√ß√µes',
        placeholder: 'Ex: Promo√ß√µes',
      },
      featuredPromosTextColor: {
        type: 'color',
        label: 'Cor do texto',
        defaultValue: '#d97706',
        placeholder: 'Ex: #d97706 (dourado)',
      },
      featuredPromosPageId: {
        type: 'string',
        label: 'P√°gina de promo√ß√µes',
        placeholder: 'Selecione uma p√°gina',
      },
      // Legacy prop - removed from schema as editor manages via ID now
      // === BARRA SUPERIOR (AVISO GERAL) ===
      noticeEnabled: {
        type: 'boolean',
        label: 'Exibir Barra Superior',
        defaultValue: false,
      },
      noticeText: {
        type: 'string',
        label: 'Texto',
        placeholder: 'Ex: Frete gr√°tis em compras acima de R$199!',
      },
      noticeBgColor: {
        type: 'color',
        label: 'Cor de Fundo',
        defaultValue: '', // Empty = inherits from theme
        placeholder: 'Usar cor prim√°ria do tema',
      },
      noticeTextColor: {
        type: 'color',
        label: 'Cor do Texto',
        defaultValue: '#ffffff',
      },
      noticeAnimation: {
        type: 'select',
        label: 'Anima√ß√£o de Entrada',
        defaultValue: 'fade',
        options: [
          { label: 'Nenhuma', value: 'none' },
          { label: 'Fade', value: 'fade' },
          { label: 'Slide', value: 'slide' },
        ],
      },
      // Barra Superior - a√ß√£o
      noticeActionEnabled: {
        type: 'boolean',
        label: 'Exibir A√ß√£o',
        defaultValue: false,
      },
      noticeActionLabel: {
        type: 'string',
        label: 'Texto da A√ß√£o',
        placeholder: 'Ex: Saiba mais',
      },
      noticeActionUrl: {
        type: 'string',
        label: 'URL da A√ß√£o',
        placeholder: 'Ex: /promocao',
      },
      noticeActionTarget: {
        type: 'select',
        label: 'Abrir em',
        defaultValue: '_self',
        options: [
          { label: 'Mesma aba', value: '_self' },
          { label: 'Nova aba', value: '_blank' },
        ],
      },
      noticeActionTextColor: {
        type: 'color',
        label: 'Cor do Texto da A√ß√£o',
      },
    },
    canHaveChildren: false,
    isRemovable: false,
  },
  {
    type: 'Footer',
    label: 'Rodap√© da Loja',
    category: 'header-footer',
    icon: 'PanelBottom',
    defaultProps: {
      // Se√ß√µes (toggles)
      showLogo: true,
      showSac: true,
      showSocial: true,
      showLegal: true,
      // Conte√∫do (override opcional)
      sacTitle: 'Atendimento (SAC)',
      legalTextOverride: '',
      // Cores do rodap√©
      footerBgColor: '',
      footerTextColor: '',
      // Se√ß√µes de imagens
      paymentMethods: { title: 'Formas de Pagamento', items: [] },
      securitySeals: { title: 'Selos de Seguran√ßa', items: [] },
      shippingMethods: { title: 'Formas de Envio', items: [] },
      officialStores: { title: 'Lojas Oficiais', items: [] },
    },
    propsSchema: {
      // === SE√á√ïES ===
      showLogo: {
        type: 'boolean',
        label: 'Mostrar Logo',
        defaultValue: true,
      },
      showSac: {
        type: 'boolean',
        label: 'Mostrar Atendimento (SAC)',
        defaultValue: true,
      },
      showSocial: {
        type: 'boolean',
        label: 'Mostrar Redes Sociais',
        defaultValue: true,
      },
      showLegal: {
        type: 'boolean',
        label: 'Mostrar Informa√ß√µes Legais',
        defaultValue: true,
      },
      // === CONTE√öDO ===
      sacTitle: {
        type: 'string',
        label: 'T√≠tulo do SAC',
        defaultValue: 'Atendimento (SAC)',
        placeholder: 'Ex: Atendimento ao Cliente',
      },
      legalTextOverride: {
        type: 'string',
        label: 'Texto Legal Personalizado',
        placeholder: 'Deixe vazio para usar dados da loja (CNPJ, endere√ßo, etc.)',
      },
      // === CORES DO RODAP√â ===
      footerBgColor: {
        type: 'color',
        label: 'Cor de Fundo',
        placeholder: 'Padr√£o do tema',
      },
      footerTextColor: {
        type: 'color',
        label: 'Cor do Texto',
        placeholder: 'Padr√£o do tema',
      },
      // === SE√á√ïES DE IMAGENS ===
      paymentMethods: {
        type: 'array',
        label: 'Formas de Pagamento',
      },
      securitySeals: {
        type: 'array',
        label: 'Selos de Seguran√ßa',
      },
      shippingMethods: {
        type: 'array',
        label: 'Formas de Envio',
      },
      officialStores: {
        type: 'array',
        label: 'Lojas Oficiais',
      },
    },
    canHaveChildren: false,
    isRemovable: false,
  },

  // ========== CONTENT BLOCKS ==========
  {
    type: 'Hero',
    label: 'Banner de Destaque',
    category: 'content',
    icon: 'Image',
    defaultProps: {
      title: 'Bem-vindo √† Nossa Loja',
      subtitle: 'Descubra produtos incr√≠veis',
      imageDesktop: '',
      imageMobile: '',
      backgroundColor: '',
      textColor: '#ffffff',
      buttonText: 'Ver Produtos',
      buttonUrl: '/produtos',
      buttonColor: '#ffffff',
      buttonTextColor: '',
      buttonHoverBgColor: '',
      buttonHoverTextColor: '',
      alignment: 'center',
      overlayOpacity: 50,
      height: 'md',
    },
    propsSchema: {
      title: {
        type: 'string',
        label: 'T√≠tulo',
        defaultValue: 'Bem-vindo √† Nossa Loja',
      },
      subtitle: {
        type: 'string',
        label: 'Subt√≠tulo',
        defaultValue: 'Descubra produtos incr√≠veis',
      },
      imageDesktop: {
        type: 'image',
        label: 'Imagem Desktop',
        helpText: 'Recomendado: 1920√ó700px (propor√ß√£o ~16:6)',
      },
      imageMobile: {
        type: 'image',
        label: 'Imagem Mobile',
        placeholder: 'Opcional - usa Desktop se vazio',
        helpText: 'Recomendado: 750√ó420px (propor√ß√£o 16:9)',
      },
      backgroundColor: {
        type: 'color',
        label: 'Cor de Fundo (se sem imagem)',
        defaultValue: '',
      },
      textColor: {
        type: 'color',
        label: 'Cor do Texto',
        defaultValue: '#ffffff',
      },
      buttonText: {
        type: 'string',
        label: 'Texto do Bot√£o',
        defaultValue: 'Ver Produtos',
      },
      buttonUrl: {
        type: 'string',
        label: 'Link do Bot√£o',
        defaultValue: '/produtos',
      },
      buttonColor: {
        type: 'color',
        label: 'Cor de Fundo do Bot√£o',
        defaultValue: '#ffffff',
      },
      buttonTextColor: {
        type: 'color',
        label: 'Cor do Texto do Bot√£o',
      },
      buttonHoverBgColor: {
        type: 'color',
        label: 'Cor de Fundo (Hover)',
      },
      buttonHoverTextColor: {
        type: 'color',
        label: 'Cor do Texto (Hover)',
      },
      alignment: {
        type: 'select',
        label: 'Alinhamento',
        defaultValue: 'center',
        options: [
          { label: 'Esquerda', value: 'left' },
          { label: 'Centro', value: 'center' },
          { label: 'Direita', value: 'right' },
        ],
      },
      height: {
        type: 'select',
        label: 'Altura',
        defaultValue: 'md',
        options: [
          { label: 'Pequeno', value: 'sm' },
          { label: 'M√©dio', value: 'md' },
          { label: 'Grande', value: 'lg' },
          { label: 'Tela Cheia', value: 'full' },
        ],
      },
      overlayOpacity: {
        type: 'number',
        label: 'Opacidade do Overlay (%)',
        defaultValue: 50,
        min: 0,
        max: 100,
      },
    },
    canHaveChildren: false,
  },
  {
    type: 'RichText',
    label: 'Texto',
    category: 'content',
    icon: 'FileText',
    defaultProps: {
      content: '<p>Digite seu conte√∫do aqui...</p>',
      fontFamily: 'inherit',
      fontSize: 'base',
      fontWeight: 'normal',
    },
    propsSchema: {
      content: {
        type: 'richtext',
        label: 'Conte√∫do',
        defaultValue: '<p>Digite seu conte√∫do aqui...</p>',
      },
      fontFamily: {
        type: 'select',
        label: 'Fonte',
        defaultValue: 'inherit',
        options: [
          { label: 'Padr√£o do tema', value: 'inherit' },
          { label: 'Sans-serif', value: 'system-ui, sans-serif' },
          { label: 'Serif', value: 'Georgia, serif' },
          { label: 'Mono', value: 'monospace' },
          // Sans-serif fonts
          { label: 'Inter', value: 'Inter, sans-serif' },
          { label: 'Roboto', value: 'Roboto, sans-serif' },
          { label: 'Open Sans', value: 'Open Sans, sans-serif' },
          { label: 'Lato', value: 'Lato, sans-serif' },
          { label: 'Montserrat', value: 'Montserrat, sans-serif' },
          { label: 'Poppins', value: 'Poppins, sans-serif' },
          { label: 'Nunito', value: 'Nunito, sans-serif' },
          { label: 'Raleway', value: 'Raleway, sans-serif' },
          { label: 'Source Sans Pro', value: 'Source Sans Pro, sans-serif' },
          { label: 'Ubuntu', value: 'Ubuntu, sans-serif' },
          { label: 'Mulish', value: 'Mulish, sans-serif' },
          { label: 'Work Sans', value: 'Work Sans, sans-serif' },
          { label: 'Quicksand', value: 'Quicksand, sans-serif' },
          { label: 'DM Sans', value: 'DM Sans, sans-serif' },
          { label: 'Manrope', value: 'Manrope, sans-serif' },
          { label: 'Outfit', value: 'Outfit, sans-serif' },
          { label: 'Plus Jakarta Sans', value: 'Plus Jakarta Sans, sans-serif' },
          // Serif fonts
          { label: 'Playfair Display', value: 'Playfair Display, serif' },
          { label: 'Merriweather', value: 'Merriweather, serif' },
          { label: 'Lora', value: 'Lora, serif' },
          { label: 'PT Serif', value: 'PT Serif, serif' },
          { label: 'Crimson Text', value: 'Crimson Text, serif' },
          { label: 'Libre Baskerville', value: 'Libre Baskerville, serif' },
          { label: 'Cormorant Garamond', value: 'Cormorant Garamond, serif' },
          { label: 'EB Garamond', value: 'EB Garamond, serif' },
          { label: 'Bitter', value: 'Bitter, serif' },
          // Display fonts
          { label: 'Abril Fatface', value: 'Abril Fatface, serif' },
          { label: 'Bebas Neue', value: 'Bebas Neue, sans-serif' },
          { label: 'Oswald', value: 'Oswald, sans-serif' },
          { label: 'Josefin Sans', value: 'Josefin Sans, sans-serif' },
          { label: 'Righteous', value: 'Righteous, sans-serif' },
        ],
      },
      fontSize: {
        type: 'select',
        label: 'Tamanho',
        defaultValue: 'base',
        options: [
          { label: 'Extra Pequeno', value: 'xs' },
          { label: 'Pequeno', value: 'sm' },
          { label: 'Normal', value: 'base' },
          { label: 'Grande', value: 'lg' },
          { label: 'Extra Grande', value: 'xl' },
          { label: '2XL', value: '2xl' },
        ],
      },
      fontWeight: {
        type: 'select',
        label: 'Peso',
        defaultValue: 'normal',
        options: [
          { label: 'Normal', value: 'normal' },
          { label: 'M√©dio', value: '500' },
          { label: 'Semi-negrito', value: '600' },
          { label: 'Negrito', value: 'bold' },
        ],
      },
    },
    canHaveChildren: false,
  },
  {
    type: 'PageContent',
    label: 'Conte√∫do da P√°gina',
    category: 'content',
    icon: 'FileInput',
    defaultProps: {},
    propsSchema: {},
    canHaveChildren: false,
  },
  {
    type: 'Image',
    label: 'Imagem',
    category: 'media',
    icon: 'ImageIcon',
    defaultProps: {
      imageDesktop: '',
      imageMobile: '',
      alt: 'Imagem',
      width: 'full',
      height: 'auto',
      objectFit: 'cover',
      objectPosition: 'center',
      aspectRatio: 'auto',
      rounded: 'none',
      shadow: 'none',
      linkUrl: '',
    },
    propsSchema: {
      imageDesktop: {
        type: 'image',
        label: 'Imagem Desktop',
        helpText: 'Recomendado: 1200√ó800px (propor√ß√£o 3:2)',
      },
      imageMobile: {
        type: 'image',
        label: 'Imagem Mobile',
        placeholder: 'Opcional - usa Desktop se vazio',
        helpText: 'Recomendado: 800√ó1000px (propor√ß√£o 4:5)',
      },
      alt: {
        type: 'string',
        label: 'Texto Alternativo',
        defaultValue: 'Imagem',
      },
      linkUrl: {
        type: 'string',
        label: 'Link (opcional)',
        placeholder: 'URL de destino ao clicar',
      },
      width: {
        type: 'select',
        label: 'Largura',
        defaultValue: 'full',
        options: [
          { label: '25%', value: '25' },
          { label: '50%', value: '50' },
          { label: '75%', value: '75' },
          { label: '100%', value: 'full' },
        ],
      },
      height: {
        type: 'select',
        label: 'Altura',
        defaultValue: 'auto',
        options: [
          { label: 'Autom√°tico', value: 'auto' },
          { label: '200px', value: '200px' },
          { label: '300px', value: '300px' },
          { label: '400px', value: '400px' },
          { label: '500px', value: '500px' },
          { label: '50vh', value: '50vh' },
          { label: '75vh', value: '75vh' },
        ],
      },
      aspectRatio: {
        type: 'select',
        label: 'Propor√ß√£o',
        defaultValue: 'auto',
        options: [
          { label: 'Autom√°tico', value: 'auto' },
          { label: '1:1 (Quadrado)', value: '1:1' },
          { label: '4:3', value: '4:3' },
          { label: '16:9', value: '16:9' },
          { label: '21:9 (Ultra wide)', value: '21:9' },
        ],
      },
      objectFit: {
        type: 'select',
        label: 'Enquadramento',
        defaultValue: 'cover',
        options: [
          { label: 'Cobrir', value: 'cover' },
          { label: 'Conter', value: 'contain' },
          { label: 'Preencher', value: 'fill' },
          { label: 'Nenhum', value: 'none' },
        ],
      },
      objectPosition: {
        type: 'select',
        label: 'Posi√ß√£o',
        defaultValue: 'center',
        options: [
          { label: 'Centro', value: 'center' },
          { label: 'Topo', value: 'top' },
          { label: 'Baixo', value: 'bottom' },
          { label: 'Esquerda', value: 'left' },
          { label: 'Direita', value: 'right' },
        ],
      },
      rounded: {
        type: 'select',
        label: 'Bordas',
        defaultValue: 'none',
        options: [
          { label: 'Nenhum', value: 'none' },
          { label: 'Pequeno', value: 'sm' },
          { label: 'M√©dio', value: 'md' },
          { label: 'Grande', value: 'lg' },
          { label: 'C√≠rculo', value: 'full' },
        ],
      },
      shadow: {
        type: 'select',
        label: 'Sombra',
        defaultValue: 'none',
        options: [
          { label: 'Nenhuma', value: 'none' },
          { label: 'Pequena', value: 'sm' },
          { label: 'M√©dia', value: 'md' },
          { label: 'Grande', value: 'lg' },
        ],
      },
    },
    canHaveChildren: false,
  },
  {
    type: 'Button',
    label: 'Bot√£o',
    category: 'content',
    icon: 'MousePointerClick',
    defaultProps: {
      text: 'Clique Aqui',
      url: '#',
      variant: 'primary',
      size: 'md',
      alignment: 'left',
      fontFamily: 'inherit',
      fontWeight: 'semibold',
      backgroundColor: '',
      textColor: '',
      borderRadius: 'md',
      hoverBgColor: '',
      hoverTextColor: '',
      borderColor: '',
      hoverBorderColor: '',
    },
    propsSchema: {
      text: {
        type: 'string',
        label: 'Texto',
        defaultValue: 'Clique Aqui',
      },
      url: {
        type: 'string',
        label: 'Link',
        defaultValue: '#',
      },
      alignment: {
        type: 'select',
        label: 'Alinhamento',
        defaultValue: 'left',
        options: [
          { label: 'Esquerda', value: 'left' },
          { label: 'Centro', value: 'center' },
          { label: 'Direita', value: 'right' },
        ],
      },
      variant: {
        type: 'select',
        label: 'Estilo',
        defaultValue: 'primary',
        options: [
          { label: 'Prim√°rio', value: 'primary' },
          { label: 'Secund√°rio', value: 'secondary' },
          { label: 'Contorno', value: 'outline' },
          { label: 'Fantasma', value: 'ghost' },
        ],
      },
      size: {
        type: 'select',
        label: 'Tamanho',
        defaultValue: 'md',
        options: [
          { label: 'Pequeno', value: 'sm' },
          { label: 'M√©dio', value: 'md' },
          { label: 'Grande', value: 'lg' },
        ],
      },
      fontFamily: {
        type: 'select',
        label: 'Fonte',
        defaultValue: 'inherit',
        options: [
          { label: 'Padr√£o do tema', value: 'inherit' },
          { label: 'Sans-serif', value: 'system-ui, sans-serif' },
          { label: 'Serif', value: 'Georgia, serif' },
          { label: 'Mono', value: 'monospace' },
          // Sans-serif fonts
          { label: 'Inter', value: 'Inter, sans-serif' },
          { label: 'Roboto', value: 'Roboto, sans-serif' },
          { label: 'Open Sans', value: 'Open Sans, sans-serif' },
          { label: 'Lato', value: 'Lato, sans-serif' },
          { label: 'Montserrat', value: 'Montserrat, sans-serif' },
          { label: 'Poppins', value: 'Poppins, sans-serif' },
          { label: 'Nunito', value: 'Nunito, sans-serif' },
          { label: 'Raleway', value: 'Raleway, sans-serif' },
          { label: 'DM Sans', value: 'DM Sans, sans-serif' },
          { label: 'Manrope', value: 'Manrope, sans-serif' },
          { label: 'Outfit', value: 'Outfit, sans-serif' },
          // Serif fonts
          { label: 'Playfair Display', value: 'Playfair Display, serif' },
          { label: 'Merriweather', value: 'Merriweather, serif' },
          { label: 'Lora', value: 'Lora, serif' },
          // Display fonts
          { label: 'Bebas Neue', value: 'Bebas Neue, sans-serif' },
          { label: 'Oswald', value: 'Oswald, sans-serif' },
        ],
      },
      fontWeight: {
        type: 'select',
        label: 'Peso da Fonte',
        defaultValue: 'semibold',
        options: [
          { label: 'Normal', value: 'normal' },
          { label: 'M√©dio', value: '500' },
          { label: 'Semi-negrito', value: 'semibold' },
          { label: 'Negrito', value: 'bold' },
        ],
      },
      backgroundColor: {
        type: 'color',
        label: 'Cor de Fundo',
      },
      textColor: {
        type: 'color',
        label: 'Cor do Texto',
      },
      hoverBgColor: {
        type: 'color',
        label: 'Cor de Fundo (Hover)',
      },
      hoverTextColor: {
        type: 'color',
        label: 'Cor do Texto (Hover)',
      },
      borderColor: {
        type: 'color',
        label: 'Cor da Borda',
      },
      hoverBorderColor: {
        type: 'color',
        label: 'Cor da Borda (Hover)',
      },
      borderRadius: {
        type: 'select',
        label: 'Bordas',
        defaultValue: 'md',
        options: [
          { label: 'Nenhum', value: 'none' },
          { label: 'Pequeno', value: 'sm' },
          { label: 'M√©dio', value: 'md' },
          { label: 'Grande', value: 'lg' },
          { label: 'Completo', value: 'full' },
        ],
      },
    },
    canHaveChildren: false,
  },
  {
    type: 'FAQ',
    label: 'Perguntas Frequentes',
    category: 'content',
    icon: 'HelpCircle',
    defaultProps: {
      title: 'Perguntas Frequentes',
      items: [
        { question: 'Como fa√ßo para comprar?', answer: 'Adicione produtos ao carrinho e finalize o pedido.' },
        { question: 'Qual o prazo de entrega?', answer: 'O prazo varia conforme a regi√£o.' },
      ],
    },
    propsSchema: {
      title: {
        type: 'string',
        label: 'T√≠tulo',
        defaultValue: 'Perguntas Frequentes',
      },
      titleAlign: {
        type: 'select',
        label: 'Alinhamento do t√≠tulo',
        options: [
          { value: 'left', label: 'Esquerda' },
          { value: 'center', label: 'Centro' },
          { value: 'right', label: 'Direita' },
        ],
        defaultValue: 'left',
      },
      items: {
        type: 'array',
        label: 'Perguntas',
        defaultValue: [],
      },
      allowMultiple: {
        type: 'boolean',
        label: 'Permitir m√∫ltiplas abertas',
        defaultValue: false,
      },
    },
    canHaveChildren: false,
  },
  {
    type: 'Testimonials',
    label: 'Depoimentos',
    category: 'content',
    icon: 'MessageCircle',
    defaultProps: {
      title: 'O que dizem nossos clientes',
      items: [
        { name: 'Maria', text: '√ìtima experi√™ncia de compra!', rating: 5 },
        { name: 'Jo√£o', text: 'Produtos de qualidade e entrega r√°pida.', rating: 5 },
      ],
    },
    propsSchema: {
      title: {
        type: 'string',
        label: 'T√≠tulo',
        defaultValue: 'O que dizem nossos clientes',
      },
      items: {
        type: 'array',
        label: 'Depoimentos',
        defaultValue: [],
      },
    },
    canHaveChildren: false,
  },
  {
    type: 'FeatureList',
    label: 'Lista de Features',
    category: 'content',
    icon: 'ListChecks',
    defaultProps: {
      title: '',
      subtitle: '',
      items: [
        { id: '1', icon: 'Check', text: 'Feature principal do produto' },
        { id: '2', icon: 'Check', text: 'Outro benef√≠cio importante' },
        { id: '3', icon: 'Check', text: 'Mais uma caracter√≠stica' },
      ],
      iconColor: '', // Empty = inherit from theme accent color
      textColor: '',
      showButton: false,
      buttonText: 'Saiba mais',
      buttonUrl: '#',
      backgroundColor: 'transparent',
    },
    propsSchema: {
      title: {
        type: 'string',
        label: 'T√≠tulo',
        defaultValue: '',
      },
      subtitle: {
        type: 'string',
        label: 'Subt√≠tulo',
        defaultValue: '',
      },
      items: {
        type: 'array',
        label: 'Features',
        defaultValue: [],
      },
      iconColor: {
        type: 'color',
        label: 'Cor dos √çcones',
        placeholder: 'Padr√£o do tema (Cor de destaque)',
      },
      textColor: {
        type: 'color',
        label: 'Cor do Texto',
        placeholder: 'Padr√£o do tema',
      },
      backgroundColor: {
        type: 'color',
        label: 'Cor de Fundo',
        defaultValue: 'transparent',
      },
      showButton: {
        type: 'boolean',
        label: 'Mostrar Bot√£o',
        defaultValue: false,
      },
      buttonText: {
        type: 'string',
        label: 'Texto do Bot√£o',
        defaultValue: 'Saiba mais',
      },
      buttonUrl: {
        type: 'string',
        label: 'Link do Bot√£o',
        defaultValue: '#',
      },
    },
    canHaveChildren: false,
  },
  {
    type: 'ContentColumns',
    label: 'Conte√∫do em Colunas',
    category: 'content',
    icon: 'Columns',
    defaultProps: {
      title: 'T√≠tulo da Se√ß√£o',
      subtitle: '',
      content: '',
      imageDesktop: '',
      imageMobile: '',
      imagePosition: 'left',
      features: [],
      iconColor: '', // Empty = inherit from theme accent color
      showButton: false,
      buttonText: 'Saiba mais',
      buttonUrl: '#',
      backgroundColor: 'transparent',
      textColor: '',
    },
    propsSchema: {
      title: {
        type: 'string',
        label: 'T√≠tulo',
        defaultValue: 'T√≠tulo da Se√ß√£o',
      },
      subtitle: {
        type: 'string',
        label: 'Subt√≠tulo',
        defaultValue: '',
      },
      content: {
        type: 'richtext',
        label: 'Conte√∫do',
        defaultValue: '',
      },
      imageDesktop: {
        type: 'image',
        label: 'Imagem Desktop',
      },
      imageMobile: {
        type: 'image',
        label: 'Imagem Mobile',
      },
      imagePosition: {
        type: 'select',
        label: 'Posi√ß√£o da Imagem',
        defaultValue: 'left',
        options: [
          { label: 'Esquerda', value: 'left' },
          { label: 'Direita', value: 'right' },
        ],
      },
      features: {
        type: 'array',
        label: 'Features',
        defaultValue: [],
      },
      iconColor: {
        type: 'color',
        label: 'Cor dos √çcones',
        placeholder: 'Padr√£o do tema (Cor de destaque)',
      },
      showButton: {
        type: 'boolean',
        label: 'Mostrar Bot√£o',
        defaultValue: false,
      },
      buttonText: {
        type: 'string',
        label: 'Texto do Bot√£o',
        defaultValue: 'Saiba mais',
      },
      buttonUrl: {
        type: 'string',
        label: 'Link do Bot√£o',
        defaultValue: '#',
      },
      backgroundColor: {
        type: 'color',
        label: 'Cor de Fundo',
        defaultValue: 'transparent',
      },
      textColor: {
        type: 'color',
        label: 'Cor do Texto',
        placeholder: 'Padr√£o do tema',
      },
    },
    canHaveChildren: false,
  },

  // ========== ECOMMERCE BLOCKS ==========
  {
    type: 'CategoryList',
    label: 'Lista de Categorias',
    category: 'ecommerce',
    icon: 'FolderTree',
    defaultProps: {
      title: 'Categorias',
      source: 'auto',
      layout: 'grid',
      columns: 4,
      showDescription: false,
      showImage: true,
      items: [],
    },
    propsSchema: {
      title: {
        type: 'string',
        label: 'T√≠tulo',
        defaultValue: 'Categorias',
      },
      source: {
        type: 'select',
        label: 'Fonte das Categorias',
        defaultValue: 'auto',
        options: [
          { label: 'Autom√°tico (todas)', value: 'auto' },
          { label: 'Apenas principais (sem subcategorias)', value: 'parent' },
          { label: 'Selecionar manualmente', value: 'custom' },
        ],
        helpText: 'Escolha como as categorias ser√£o exibidas',
      },
      items: {
        type: 'categoryMultiSelect',
        label: 'Categorias Selecionadas',
        max: 12,
        helpText: 'üìê Cards grandes. Recomendado: 800√ó800px para desktop, 400√ó400px para mobile.',
        showWhen: { source: 'custom' },
        imageDimensions: {
          desktop: '800√ó800px',
          mobile: '400√ó400px',
          aspectRatio: '1:1 (quadrada)'
        }
      },
      layout: {
        type: 'select',
        label: 'Layout',
        defaultValue: 'grid',
        options: [
          { label: 'Grade', value: 'grid' },
          { label: 'Lista', value: 'list' },
          { label: 'Carrossel', value: 'carousel' },
        ],
      },
      columns: {
        type: 'select',
        label: 'Colunas',
        defaultValue: '4',
        options: [
          { label: '2', value: '2' },
          { label: '3', value: '3' },
          { label: '4', value: '4' },
          { label: '6', value: '6' },
        ],
      },
      showImage: {
        type: 'boolean',
        label: 'Mostrar Imagem',
        defaultValue: true,
      },
      showDescription: {
        type: 'boolean',
        label: 'Mostrar Descri√ß√£o',
        defaultValue: false,
      },
    },
    canHaveChildren: false,
  },
  {
    type: 'ProductGrid',
    label: 'Vitrine de Produtos',
    category: 'ecommerce',
    icon: 'LayoutGrid',
    defaultProps: {
      title: 'Produtos',
      source: 'featured',
      categoryId: '',
      columns: 4,
      limit: 8,
      showPrice: true,
    },
    propsSchema: {
      title: {
        type: 'string',
        label: 'T√≠tulo',
        defaultValue: 'Produtos',
      },
      source: {
        type: 'select',
        label: 'Fonte',
        defaultValue: 'featured',
        options: [
          { label: 'Destaques', value: 'featured' },
          { label: 'Mais Vendidos', value: 'bestsellers' },
          { label: 'Novidades', value: 'newest' },
          { label: 'Categoria', value: 'category' },
        ],
      },
      categoryId: {
        type: 'category',
        label: 'Categoria (se fonte = Categoria)',
        placeholder: 'Selecione uma categoria',
      },
      columns: {
        type: 'select',
        label: 'Colunas',
        defaultValue: '4',
        options: [
          { label: '2', value: '2' },
          { label: '3', value: '3' },
          { label: '4', value: '4' },
        ],
      },
      limit: {
        type: 'number',
        label: 'Limite de Produtos',
        defaultValue: 8,
        min: 1,
        max: 24,
      },
      showPrice: {
        type: 'boolean',
        label: 'Mostrar Pre√ßo',
        defaultValue: true,
      },
    },
    canHaveChildren: false,
  },
  // CategoryPageLayout - Listagem de produtos de categoria com filtros (REGRAS.md)
  // NOTA: Este bloco N√ÉO possui propsSchema pois as configura√ß√µes de categoria
  // s√£o feitas via "Configura√ß√µes do tema > Categoria" (CategorySettingsPanel)
  // e n√£o via props do bloco. Isso evita que apare√ßa painel de edi√ß√£o ao clicar.
  {
    type: 'CategoryPageLayout',
    label: 'Listagem de Categoria',
    category: 'ecommerce',
    icon: 'LayoutList',
    defaultProps: {
      showFilters: true,
      columns: 4,
      limit: 24,
    },
    // propsSchema vazio - configura√ß√µes via CategorySettingsPanel
    propsSchema: {},
    canHaveChildren: false,
    isRemovable: false, // REGRAS.md: estrutura obrigat√≥ria
  },
  {
    type: 'ProductCarousel',
    label: 'Carrossel de Produtos',
    category: 'ecommerce',
    icon: 'Carousel',
    defaultProps: {
      title: 'Produtos em Destaque',
      source: 'featured',
      categoryId: '',
      limit: 8,
      showPrice: true,
      showButton: true,
      buttonText: 'Ver produto',
    },
    propsSchema: {
      title: {
        type: 'string',
        label: 'T√≠tulo',
        defaultValue: 'Produtos em Destaque',
      },
      source: {
        type: 'select',
        label: 'Fonte',
        defaultValue: 'featured',
        options: [
          { label: 'Destaques', value: 'featured' },
          { label: 'Novidades', value: 'newest' },
          { label: 'Todos', value: 'all' },
          { label: 'Categoria', value: 'category' },
        ],
      },
      categoryId: {
        type: 'category',
        label: 'Categoria (se fonte = Categoria)',
        placeholder: 'Selecione uma categoria',
      },
      limit: {
        type: 'number',
        label: 'Limite de Produtos',
        defaultValue: 8,
        min: 4,
        max: 20,
      },
      showPrice: {
        type: 'boolean',
        label: 'Mostrar Pre√ßo',
        defaultValue: true,
      },
      showButton: {
        type: 'boolean',
        label: 'Mostrar Bot√£o',
        defaultValue: true,
      },
      buttonText: {
        type: 'string',
        label: 'Texto do Bot√£o',
        defaultValue: 'Ver produto',
      },
    },
    canHaveChildren: false,
  },
  {
    type: 'FeaturedProducts',
    label: 'Produtos Selecionados',
    category: 'ecommerce',
    icon: 'Star',
    defaultProps: {
      title: 'Produtos em Destaque',
      productIds: [],
      limit: 4,
      columns: 4,
      showPrice: true,
      showButton: true,
      buttonText: 'Ver produto',
    },
    propsSchema: {
      title: {
        type: 'string',
        label: 'T√≠tulo',
        defaultValue: 'Produtos em Destaque',
      },
      productIds: {
        type: 'productMultiSelect',
        label: 'Produtos',
      },
      limit: {
        type: 'number',
        label: 'Limite de Produtos',
        defaultValue: 4,
        min: 1,
        max: 12,
      },
      columns: {
        type: 'select',
        label: 'Colunas',
        defaultValue: '4',
        options: [
          { label: '2', value: '2' },
          { label: '3', value: '3' },
          { label: '4', value: '4' },
        ],
      },
      showPrice: {
        type: 'boolean',
        label: 'Mostrar Pre√ßo',
        defaultValue: true,
      },
      showButton: {
        type: 'boolean',
        label: 'Mostrar Bot√£o',
        defaultValue: true,
      },
      buttonText: {
        type: 'string',
        label: 'Texto do Bot√£o',
        defaultValue: 'Ver produto',
      },
    },
    canHaveChildren: false,
  },
  {
    type: 'ProductCard',
    label: 'Card de Produto',
    category: 'ecommerce',
    icon: 'Package',
    defaultProps: {
      productId: '',
      showPrice: true,
      showButton: true,
    },
    propsSchema: {
      productId: {
        type: 'product',
        label: 'Produto',
        placeholder: 'Selecione um produto',
      },
      showPrice: {
        type: 'boolean',
        label: 'Mostrar Pre√ßo',
        defaultValue: true,
      },
      showButton: {
        type: 'boolean',
        label: 'Mostrar Bot√£o',
        defaultValue: true,
      },
    },
    canHaveChildren: false,
  },
  {
    type: 'ProductDetails',
    label: 'Detalhes do Produto',
    category: 'ecommerce',
    icon: 'ShoppingBag',
    defaultProps: {},
    propsSchema: {}, // Settings managed in Theme Settings > P√°ginas > Produto
    canHaveChildren: false,
    isRemovable: false,
  },
  {
    type: 'CartSummary',
    label: 'Resumo do Carrinho',
    category: 'ecommerce',
    icon: 'ShoppingCart',
    defaultProps: {},
    propsSchema: {}, // Settings managed in Theme Settings > P√°ginas > Carrinho
    canHaveChildren: false,
    isRemovable: false,
  },
  {
    type: 'CheckoutSteps',
    label: 'Etapas do Checkout',
    category: 'ecommerce',
    icon: 'ListChecks',
    defaultProps: {},
    propsSchema: {}, // Settings managed in Theme Settings > P√°ginas > Checkout
    canHaveChildren: false,
    isRemovable: false,
  },

  // ========== ESSENTIAL BLOCKS (8 novos) ==========
  {
    type: 'HeroBanner',
    label: 'Carrossel de Banners',
    category: 'media',
    icon: 'Image',
    defaultProps: {
      slides: [],
      autoplaySeconds: 5,
      bannerWidth: 'full',
      showArrows: true,
      showDots: true,
    },
    propsSchema: {
      slides: {
        type: 'array',
        label: 'Slides do Carrossel',
        defaultValue: [],
        helpText: 'Adicione slides com imagens para Desktop e Mobile',
      },
      autoplaySeconds: {
        type: 'number',
        label: 'Tempo de Autoplay (segundos)',
        defaultValue: 5,
        min: 0,
        max: 30,
      },
      bannerWidth: {
        type: 'select',
        label: 'Largura do Banner',
        defaultValue: 'full',
        options: [
          { label: 'Largura Total', value: 'full' },
          { label: 'Contido', value: 'contained' },
        ],
      },
      showArrows: {
        type: 'boolean',
        label: 'Mostrar Setas',
        defaultValue: true,
      },
      showDots: {
        type: 'boolean',
        label: 'Mostrar Indicadores',
        defaultValue: true,
      },
    },
    canHaveChildren: false,
  },
  {
    type: 'CollectionSection',
    label: 'Categoria/Cole√ß√£o',
    category: 'ecommerce',
    icon: 'LayoutGrid',
    defaultProps: {
      title: 'Cole√ß√£o',
      categoryId: '',
      displayStyle: 'grid',
      limit: 8,
      columns: 4,
      mobileColumns: 2,
      showViewAll: true,
      viewAllText: 'Ver todos',
      showPrice: true,
      showButton: true,
    },
    propsSchema: {
      title: {
        type: 'string',
        label: 'T√≠tulo da Se√ß√£o',
        defaultValue: 'Cole√ß√£o',
      },
      categoryId: {
        type: 'category',
        label: 'Categoria',
        placeholder: 'Selecione uma categoria',
      },
      displayStyle: {
        type: 'select',
        label: 'Estilo de Exibi√ß√£o',
        defaultValue: 'grid',
        options: [
          { label: 'Grade', value: 'grid' },
          { label: 'Carrossel', value: 'carousel' },
        ],
      },
      limit: {
        type: 'number',
        label: 'Quantidade de Produtos',
        defaultValue: 8,
        min: 4,
        max: 24,
      },
      columns: {
        type: 'select',
        label: 'Colunas (Desktop)',
        defaultValue: '4',
        options: [
          { label: '3', value: '3' },
          { label: '4', value: '4' },
          { label: '5', value: '5' },
        ],
      },
      mobileColumns: {
        type: 'select',
        label: 'Colunas (Mobile)',
        defaultValue: '2',
        options: [
          { label: '1', value: '1' },
          { label: '2', value: '2' },
        ],
      },
      showViewAll: {
        type: 'boolean',
        label: 'Mostrar "Ver todos"',
        defaultValue: true,
      },
      viewAllText: {
        type: 'string',
        label: 'Texto do Link',
        defaultValue: 'Ver todos',
      },
      showPrice: {
        type: 'boolean',
        label: 'Mostrar Pre√ßo',
        defaultValue: true,
      },
      showButton: {
        type: 'boolean',
        label: 'Mostrar Bot√£o',
        defaultValue: true,
      },
    },
    canHaveChildren: false,
  },
  {
    type: 'InfoHighlights',
    label: 'Benef√≠cios da Loja',
    category: 'content',
    icon: 'Award',
    defaultProps: {
      items: [
        { id: '1', icon: 'Truck', title: 'Frete Gr√°tis', description: 'Em compras acima de R$199' },
        { id: '2', icon: 'CreditCard', title: 'Parcelamento', description: 'Em at√© 12x sem juros' },
        { id: '3', icon: 'Shield', title: 'Compra Segura', description: 'Seus dados protegidos' },
      ],
      layout: 'horizontal',
      iconColor: '',
      textColor: '',
    },
    propsSchema: {
      items: {
        type: 'array',
        label: 'Itens',
        defaultValue: [],
      },
      layout: {
        type: 'select',
        label: 'Layout',
        defaultValue: 'horizontal',
        options: [
          { label: 'Horizontal', value: 'horizontal' },
          { label: 'Vertical', value: 'vertical' },
        ],
      },
      iconColor: {
        type: 'color',
        label: 'Cor dos √çcones',
        placeholder: 'Padr√£o do tema',
      },
      textColor: {
        type: 'color',
        label: 'Cor do Texto',
        placeholder: 'Padr√£o do tema',
      },
    },
    canHaveChildren: false,
  },
  {
    // REGRAS.md linha 77: Banner configurado SOMENTE no menu Categorias
    // Sem op√ß√µes de edi√ß√£o no builder - propsSchema vazio = sem painel direito
    type: 'CategoryBanner',
    label: 'Banner da Categoria',
    category: 'ecommerce',
    icon: 'Image',
    defaultProps: {},
    propsSchema: {},
    canHaveChildren: false,
  },
  {
    type: 'BannerProducts',
    label: 'Banner + Produtos',
    category: 'ecommerce',
    icon: 'Layers',
    defaultProps: {
      title: 'Oferta Especial',
      description: '',
      imageDesktop: '',
      imageMobile: '',
      source: 'manual',
      productIds: [],
      categoryId: '',
      limit: 4,
      showCta: false,
      ctaText: 'Ver mais',
      ctaUrl: '',
    },
    propsSchema: {
      title: {
        type: 'string',
        label: 'T√≠tulo',
        defaultValue: 'Oferta Especial',
      },
      description: {
        type: 'string',
        label: 'Descri√ß√£o',
        placeholder: 'Descri√ß√£o opcional',
      },
      imageDesktop: {
        type: 'image',
        label: 'Imagem Desktop',
        placeholder: 'URL da imagem desktop',
        helpText: 'Recomendado: 600√ó400px (propor√ß√£o 3:2)',
      },
      imageMobile: {
        type: 'image',
        label: 'Imagem Mobile',
        placeholder: 'URL da imagem mobile (opcional)',
        helpText: 'Recomendado: 400√ó500px (propor√ß√£o 4:5)',
      },
      source: {
        type: 'select',
        label: 'Fonte dos Produtos',
        defaultValue: 'manual',
        options: [
          { label: 'Selecionados (manual)', value: 'manual' },
          { label: 'Categoria', value: 'category' },
        ],
      },
      productIds: {
        type: 'productMultiSelect',
        label: 'Produtos',
        showWhen: { source: 'manual' },
      },
      categoryId: {
        type: 'category',
        label: 'Categoria',
        placeholder: 'Selecione uma categoria',
        showWhen: { source: 'category' },
      },
      limit: {
        type: 'number',
        label: 'Limite de Produtos',
        defaultValue: 4,
        min: 2,
        max: 8,
      },
      showCta: {
        type: 'boolean',
        label: 'Mostrar CTA',
        defaultValue: false,
      },
      ctaText: {
        type: 'string',
        label: 'Texto do CTA',
        defaultValue: 'Ver mais',
      },
      ctaUrl: {
        type: 'string',
        label: 'URL do CTA',
        placeholder: 'Link do bot√£o',
      },
    },
    canHaveChildren: false,
  },
  {
    type: 'YouTubeVideo',
    label: 'V√≠deo (YouTube)',
    category: 'media',
    icon: 'Youtube',
    defaultProps: {
      title: '',
      youtubeUrl: '',
      widthPreset: 'lg',
      aspectRatio: '16:9',
    },
    propsSchema: {
      title: {
        type: 'string',
        label: 'T√≠tulo (opcional)',
        placeholder: 'T√≠tulo da se√ß√£o',
      },
      youtubeUrl: {
        type: 'string',
        label: 'URL do YouTube',
        placeholder: 'https://www.youtube.com/watch?v=...',
      },
      widthPreset: {
        type: 'select',
        label: 'Largura do v√≠deo',
        defaultValue: 'lg',
        options: [
          { label: 'Pequeno (sm)', value: 'sm' },
          { label: 'M√©dio (md)', value: 'md' },
          { label: 'Grande (lg)', value: 'lg' },
          { label: 'Extra grande (xl)', value: 'xl' },
          { label: 'Largura total', value: 'full' },
        ],
      },
      aspectRatio: {
        type: 'select',
        label: 'Propor√ß√£o',
        defaultValue: '16:9',
        options: [
          { label: '16:9 (Horizontal)', value: '16:9' },
          { label: '4:3 (Cl√°ssico)', value: '4:3' },
          { label: '1:1 (Quadrado)', value: '1:1' },
        ],
      },
    },
    canHaveChildren: false,
  },
  {
    type: 'VideoCarousel',
    label: 'Carrossel de V√≠deos',
    category: 'media',
    icon: 'PlayCircle',
    defaultProps: {
      title: '',
      videos: [],
      videosJson: '',
      showControls: true,
      aspectRatio: '16:9',
    },
    propsSchema: {
      title: {
        type: 'string',
        label: 'T√≠tulo (opcional)',
        placeholder: 'Nossos V√≠deos',
      },
      videos: {
        type: 'array',
        label: 'V√≠deos',
        helpText: 'YouTube: use "url". Upload: use "videoDesktop" e "videoMobile" (ou s√≥ videoDesktop)',
      },
      videosJson: {
        type: 'textarea',
        label: 'URLs dos V√≠deos (alternativo)',
        placeholder: 'https://youtube.com/watch?v=abc123\nhttps://youtu.be/xyz456',
        helpText: 'Cole URLs do YouTube (uma por linha) ou JSON de v√≠deos',
      },
      showControls: {
        type: 'boolean',
        label: 'Mostrar setas de navega√ß√£o',
        defaultValue: true,
      },
      aspectRatio: {
        type: 'select',
        label: 'Propor√ß√£o',
        defaultValue: '16:9',
        options: [
          { label: '16:9 (Horizontal)', value: '16:9' },
          { label: '4:3 (Cl√°ssico)', value: '4:3' },
          { label: '1:1 (Quadrado)', value: '1:1' },
          { label: '9:16 (Vertical)', value: '9:16' },
        ],
      },
    },
    canHaveChildren: false,
  },
  {
    type: 'VideoUpload',
    label: 'V√≠deo (Upload)',
    category: 'media',
    icon: 'Video',
    defaultProps: {
      videoDesktop: '',
      videoMobile: '',
      controls: true,
      autoplay: false,
      loop: false,
      muted: false,
      aspectRatio: 'auto',
      aspectRatioCustom: '',
      objectFit: 'contain',
    },
    propsSchema: {
      videoDesktop: {
        type: 'video',
        label: 'V√≠deo Desktop',
        helpText: 'MP4, WEBM ou MOV',
      },
      videoMobile: {
        type: 'video',
        label: 'V√≠deo Mobile',
        placeholder: 'Opcional - usa Desktop se vazio',
      },
      aspectRatio: {
        type: 'select',
        label: 'Propor√ß√£o',
        defaultValue: 'auto',
        options: [
          { label: 'Auto (detectar)', value: 'auto' },
          { label: '16:9 (Horizontal)', value: '16/9' },
          { label: '9:16 (Vertical)', value: '9/16' },
          { label: '4:3 (Cl√°ssico)', value: '4/3' },
          { label: '1:1 (Quadrado)', value: '1/1' },
          { label: '4:5 (Instagram)', value: '4/5' },
          { label: '21:9 (Ultrawide)', value: '21/9' },
          { label: 'Personalizado', value: 'custom' },
        ],
      },
      aspectRatioCustom: {
        type: 'string',
        label: 'Propor√ß√£o Personalizada',
        placeholder: 'Ex: 3/4 ou 1.5',
        helpText: 'Use formato X/Y ou n√∫mero decimal',
      },
      objectFit: {
        type: 'select',
        label: 'Encaixe',
        defaultValue: 'contain',
        options: [
          { label: 'Mostrar inteiro (contain)', value: 'contain' },
          { label: 'Preencher (cover)', value: 'cover' },
          { label: 'Esticar (fill)', value: 'fill' },
        ],
      },
      controls: {
        type: 'boolean',
        label: 'Mostrar Controles',
        defaultValue: true,
      },
      autoplay: {
        type: 'boolean',
        label: 'Reprodu√ß√£o Autom√°tica',
        defaultValue: false,
      },
      loop: {
        type: 'boolean',
        label: 'Repetir',
        defaultValue: false,
      },
      muted: {
        type: 'boolean',
        label: 'Sem Som (Mudo)',
        defaultValue: false,
      },
    },
    canHaveChildren: false,
  },
  {
    type: 'Reviews',
    label: 'Avalia√ß√µes',
    category: 'content',
    icon: 'Star',
    defaultProps: {
      title: 'O que nossos clientes dizem',
      reviews: [
        { name: 'Maria S.', rating: 5, text: 'Produto excelente, entrega r√°pida!' },
        { name: 'Jo√£o P.', rating: 5, text: 'Superou minhas expectativas.' },
      ],
      visibleCount: 3,
    },
    propsSchema: {
      title: {
        type: 'string',
        label: 'T√≠tulo',
        defaultValue: 'O que nossos clientes dizem',
      },
      reviews: {
        type: 'array',
        label: 'Avalia√ß√µes',
        defaultValue: [],
      },
      visibleCount: {
        type: 'number',
        label: 'Quantidade Vis√≠vel',
        defaultValue: 3,
        min: 1,
        max: 10,
      },
    },
    canHaveChildren: false,
  },
  {
    type: 'FeaturedCategories',
    label: 'Categorias em Destaque',
    category: 'ecommerce',
    icon: 'Grid3x3',
    defaultProps: {
      title: 'Categorias',
      items: [],
      showName: true,
      mobileStyle: 'grid',
    },
    propsSchema: {
      title: {
        type: 'string',
        label: 'T√≠tulo',
        defaultValue: 'Categorias',
      },
      items: {
        type: 'categoryMultiSelect',
        label: 'Categorias',
        max: 12,
        helpText: 'üìê Formato circular. Recomendado: 200√ó200px para desktop, 120√ó120px para mobile.',
        imageDimensions: {
          desktop: '200√ó200px',
          mobile: '120√ó120px',
          aspectRatio: '1:1 (circular)'
        }
      },
      showName: {
        type: 'boolean',
        label: 'Exibir Nome',
        defaultValue: true,
      },
      mobileStyle: {
        type: 'select',
        label: 'Estilo Mobile',
        defaultValue: 'grid',
        options: [
          { label: 'Grade', value: 'grid' },
          { label: 'Carrossel', value: 'carousel' },
        ],
      },
    },
    canHaveChildren: false,
  },
  {
    type: 'TextBanners',
    label: 'Texto + Banners',
    category: 'content',
    icon: 'FileText',
    defaultProps: {
      title: 'T√≠tulo legal',
      text: 'Escreva seu texto aqui, falando um pouco sobre sua marca, produto, empresa ou promo√ß√£o. Solte sua imagina√ß√£o!',
      imageDesktop1: '',
      imageMobile1: '',
      imageDesktop2: '',
      imageMobile2: '',
      ctaEnabled: true,
      ctaText: 'Saiba mais',
      ctaUrl: '#',
      ctaBgColor: '',
      ctaTextColor: '',
      layout: 'text-left',
    },
    propsSchema: {
      title: {
        type: 'string',
        label: 'T√≠tulo',
        placeholder: 'T√≠tulo da se√ß√£o',
      },
      text: {
        type: 'textarea',
        label: 'Texto',
        placeholder: 'Conte√∫do do texto',
      },
      imageDesktop1: {
        type: 'image',
        label: 'Imagem 1 (Desktop)',
        placeholder: 'URL da imagem desktop',
        helpText: 'Recomendado: 600√ó800px (propor√ß√£o 3:4)',
      },
      imageMobile1: {
        type: 'image',
        label: 'Imagem 1 (Mobile)',
        placeholder: 'URL da imagem mobile (opcional)',
      },
      imageDesktop2: {
        type: 'image',
        label: 'Imagem 2 (Desktop)',
        placeholder: 'URL da imagem desktop',
        helpText: 'Recomendado: 600√ó800px (propor√ß√£o 3:4)',
      },
      imageMobile2: {
        type: 'image',
        label: 'Imagem 2 (Mobile)',
        placeholder: 'URL da imagem mobile (opcional)',
      },
      layout: {
        type: 'select',
        label: 'Layout',
        defaultValue: 'text-left',
        options: [
          { label: 'Texto √† esquerda', value: 'text-left' },
          { label: 'Texto √† direita', value: 'text-right' },
        ],
      },
      ctaEnabled: {
        type: 'boolean',
        label: 'Mostrar CTA',
        defaultValue: true,
      },
      ctaText: {
        type: 'string',
        label: 'Texto do CTA',
        defaultValue: 'Saiba mais',
      },
      ctaUrl: {
        type: 'string',
        label: 'URL do CTA',
        placeholder: 'Link do bot√£o',
      },
      ctaBgColor: {
        type: 'color',
        label: 'Cor de Fundo do CTA',
        placeholder: 'Padr√£o do tema',
      },
      ctaTextColor: {
        type: 'color',
        label: 'Cor do Texto do CTA',
        placeholder: 'Padr√£o do tema',
      },
    },
    canHaveChildren: false,
  },
  // ========== ESSENTIAL ECOMMERCE BLOCKS (non-removable) ==========
  // ========== SYSTEM BLOCKS (Config via Theme Settings > Pages only) ==========
  // NOTE: propsSchema removed - all settings managed in Configura√ß√µes do tema > P√°ginas
  {
    type: 'Cart',
    label: 'Carrinho',
    category: 'ecommerce',
    icon: 'ShoppingCart',
    defaultProps: {},
    propsSchema: {}, // Settings managed in Theme Settings > Pages > Carrinho
    canHaveChildren: false,
    isRemovable: false,
  },
  {
    type: 'Checkout',
    label: 'Checkout',
    category: 'ecommerce',
    icon: 'CreditCard',
    defaultProps: {},
    propsSchema: {}, // Settings managed in Theme Settings > Pages > Checkout
    canHaveChildren: false,
    isRemovable: false,
  },
  {
    type: 'ThankYou',
    label: 'Confirma√ß√£o de Pedido',
    category: 'ecommerce',
    icon: 'CheckCircle',
    defaultProps: {},
    propsSchema: {}, // Settings managed in Theme Settings > Pages > Obrigado
    canHaveChildren: false,
    isRemovable: false,
  },
  // ========== ACCOUNT BLOCKS (essential, non-removable) ==========
  {
    type: 'AccountHub',
    label: 'Hub da Conta',
    category: 'ecommerce',
    icon: 'User',
    defaultProps: {},
    propsSchema: {},
    canHaveChildren: false,
    isRemovable: false,
  },
  {
    type: 'OrdersList',
    label: 'Lista de Pedidos',
    category: 'ecommerce',
    icon: 'Package',
    defaultProps: {},
    propsSchema: {},
    canHaveChildren: false,
    isRemovable: false,
  },
  {
    type: 'OrderDetail',
    label: 'Detalhe do Pedido',
    category: 'ecommerce',
    icon: 'FileText',
    defaultProps: {},
    propsSchema: {},
    canHaveChildren: false,
    isRemovable: false,
  },
  // ========== SYSTEM BLOCKS (Rastreio, Blog) - Config via Theme Settings ==========
  {
    type: 'TrackingLookup',
    label: 'Rastrear Pedido',
    category: 'ecommerce',
    icon: 'Package',
    defaultProps: {},
    propsSchema: {}, // Settings managed in Theme Settings > Pages > Rastreio
    canHaveChildren: false,
    isRemovable: false,
  },
  {
    type: 'BlogListing',
    label: 'Listagem do Blog',
    category: 'content',
    icon: 'FileText',
    defaultProps: {},
    propsSchema: {}, // Settings managed in Theme Settings > Pages > Blog
    canHaveChildren: false,
    isRemovable: false,
  },
  // ========== CUSTOM BLOCK (Imported Content) ==========
  {
    type: 'CustomBlock',
    label: 'Bloco Importado',
    category: 'content',
    icon: 'Code',
    defaultProps: {
      customBlockId: '',
      htmlContent: '',
      cssContent: '',
      blockName: 'Conte√∫do Importado',
    },
    propsSchema: {
      customBlockId: {
        type: 'string',
        label: 'ID do Bloco (DB)',
        placeholder: 'UUID do custom_blocks',
      },
      htmlContent: {
        type: 'textarea',
        label: 'HTML (fallback)',
        placeholder: 'HTML direto se n√£o usar ID',
      },
      cssContent: {
        type: 'textarea',
        label: 'CSS (fallback)',
        placeholder: 'CSS direto se n√£o usar ID',
      },
      blockName: {
        type: 'string',
        label: 'Nome do Bloco',
        defaultValue: 'Conte√∫do Importado',
      },
    },
    canHaveChildren: false,
    isRemovable: true,
  },
  // ========== HTML SECTION (Manual HTML/CSS) ==========
  {
    type: 'HTMLSection',
    label: 'Bloco Html',
    category: 'layout',
    icon: 'FileCode',
    defaultProps: {
      htmlContent: '<div style="padding: 40px; text-align: center; background: #f0f0f0;">\n  <h2>Se√ß√£o HTML Customizada</h2>\n  <p>Edite o HTML e CSS nas propriedades do bloco.</p>\n</div>',
      cssContent: '',
      blockName: 'Se√ß√£o HTML',
      baseUrl: '',
    },
    propsSchema: {
      htmlContent: {
        type: 'textarea',
        label: 'C√≥digo HTML',
        placeholder: '<div>Seu HTML aqui...</div>',
      },
      cssContent: {
        type: 'textarea',
        label: 'C√≥digo CSS',
        placeholder: '.minha-classe { color: red; }',
      },
      blockName: {
        type: 'string',
        label: 'Nome do Bloco',
        defaultValue: 'Bloco Html',
      },
      baseUrl: {
        type: 'string',
        label: 'URL Base (para imagens relativas)',
        placeholder: 'https://exemplo.com/',
      },
    },
    canHaveChildren: false,
    isRemovable: true,
  },

  // ========== NEW BLOCKS (6 novos) ==========
  {
    type: 'StepsTimeline',
    label: 'Passos / Timeline',
    category: 'content',
    icon: 'ListOrdered',
    defaultProps: {
      title: 'Como Funciona',
      subtitle: '',
      steps: [
        { number: 1, title: 'Passo 1', description: 'Descri√ß√£o do primeiro passo' },
        { number: 2, title: 'Passo 2', description: 'Descri√ß√£o do segundo passo' },
        { number: 3, title: 'Passo 3', description: 'Descri√ß√£o do terceiro passo' },
      ],
      layout: 'horizontal',
      accentColor: '',
      showNumbers: true,
      backgroundColor: 'transparent',
    },
    propsSchema: {
      title: { type: 'string', label: 'T√≠tulo' },
      subtitle: { type: 'string', label: 'Subt√≠tulo' },
      steps: { type: 'array', label: 'Passos' },
      layout: { type: 'select', label: 'Layout', options: [{ label: 'Horizontal', value: 'horizontal' }, { label: 'Vertical', value: 'vertical' }] },
      accentColor: { type: 'color', label: 'Cor de Destaque' },
      showNumbers: { type: 'boolean', label: 'Mostrar N√∫meros' },
      backgroundColor: { type: 'color', label: 'Cor de Fundo' },
    },
    canHaveChildren: false,
    isRemovable: true,
  },
  {
    type: 'CountdownTimer',
    label: 'Contador Regressivo',
    category: 'content',
    icon: 'Timer',
    defaultProps: {
      title: 'Oferta por tempo limitado',
      subtitle: '',
      endDate: '',
      showDays: true,
      showHours: true,
      showMinutes: true,
      showSeconds: true,
      backgroundColor: '#dc2626',
      textColor: '#ffffff',
      expiredMessage: 'Oferta encerrada',
      buttonText: '',
      buttonUrl: '',
    },
    propsSchema: {
      title: { type: 'string', label: 'T√≠tulo' },
      subtitle: { type: 'string', label: 'Subt√≠tulo' },
      endDate: { type: 'datetime', label: 'Data de T√©rmino', helpText: 'Selecione a data e hora que a oferta termina' },
      showDays: { type: 'boolean', label: 'Mostrar Dias' },
      showHours: { type: 'boolean', label: 'Mostrar Horas' },
      showMinutes: { type: 'boolean', label: 'Mostrar Minutos' },
      showSeconds: { type: 'boolean', label: 'Mostrar Segundos' },
      backgroundColor: { type: 'color', label: 'Cor de Fundo' },
      textColor: { type: 'color', label: 'Cor do Texto' },
      expiredMessage: { type: 'string', label: 'Mensagem de Expirado' },
      buttonText: { type: 'string', label: 'Texto do Bot√£o' },
      buttonUrl: { type: 'string', label: 'URL do Bot√£o' },
    },
    canHaveChildren: false,
    isRemovable: true,
  },
  {
    type: 'LogosCarousel',
    label: 'Logos / Parceiros',
    category: 'content',
    icon: 'Building2',
    defaultProps: {
      title: 'Nossos Parceiros',
      subtitle: '',
      logos: [],
      autoplay: true,
      grayscale: true,
      columns: 5,
      backgroundColor: 'transparent',
    },
    propsSchema: {
      title: { type: 'string', label: 'T√≠tulo' },
      subtitle: { type: 'string', label: 'Subt√≠tulo' },
      logos: { type: 'array', label: 'Logos' },
      autoplay: { type: 'boolean', label: 'Autoplay' },
      grayscale: { type: 'boolean', label: 'Escala de Cinza' },
      columns: { type: 'select', label: 'Colunas', options: [{ label: '3', value: '3' }, { label: '4', value: '4' }, { label: '5', value: '5' }, { label: '6', value: '6' }] },
      backgroundColor: { type: 'color', label: 'Cor de Fundo' },
    },
    canHaveChildren: false,
    isRemovable: true,
  },
  {
    type: 'StatsNumbers',
    label: 'Estat√≠sticas',
    category: 'content',
    icon: 'BarChart3',
    defaultProps: {
      title: '',
      subtitle: '',
      items: [
        { number: '10k+', label: 'Clientes satisfeitos' },
        { number: '99%', label: 'Aprova√ß√£o' },
        { number: '24h', label: 'Entrega' },
      ],
      layout: 'horizontal',
      animateNumbers: true,
      backgroundColor: 'transparent',
      accentColor: '',
    },
    propsSchema: {
      title: { type: 'string', label: 'T√≠tulo' },
      subtitle: { type: 'string', label: 'Subt√≠tulo' },
      items: { type: 'array', label: 'Estat√≠sticas' },
      layout: { type: 'select', label: 'Layout', options: [{ label: 'Horizontal', value: 'horizontal' }, { label: 'Grid', value: 'grid' }] },
      animateNumbers: { type: 'boolean', label: 'Animar N√∫meros' },
      backgroundColor: { type: 'color', label: 'Cor de Fundo' },
      accentColor: { type: 'color', label: 'Cor de Destaque' },
    },
    canHaveChildren: false,
    isRemovable: true,
  },
  {
    type: 'ImageGallery',
    label: 'Galeria de Imagens',
    category: 'media',
    icon: 'Images',
    defaultProps: {
      title: '',
      subtitle: '',
      images: [],
      columns: 3,
      gap: 'md',
      enableLightbox: true,
      aspectRatio: 'square',
      borderRadius: 8,
      backgroundColor: 'transparent',
    },
    propsSchema: {
      title: { type: 'string', label: 'T√≠tulo' },
      subtitle: { type: 'string', label: 'Subt√≠tulo' },
      images: { type: 'array', label: 'Imagens' },
      columns: { type: 'select', label: 'Colunas', options: [{ label: '2', value: '2' }, { label: '3', value: '3' }, { label: '4', value: '4' }] },
      gap: { type: 'select', label: 'Espa√ßamento', options: [{ label: 'Pequeno', value: 'sm' }, { label: 'M√©dio', value: 'md' }, { label: 'Grande', value: 'lg' }] },
      enableLightbox: { type: 'boolean', label: 'Habilitar Lightbox' },
      aspectRatio: { type: 'select', label: 'Propor√ß√£o', options: [{ label: 'Quadrado', value: 'square' }, { label: '4:3', value: '4:3' }, { label: '16:9', value: '16:9' }, { label: 'Auto', value: 'auto' }] },
      borderRadius: { type: 'number', label: 'Arredondamento (px)' },
      backgroundColor: { type: 'color', label: 'Cor de Fundo' },
    },
    canHaveChildren: false,
    isRemovable: true,
  },
  {
    type: 'AccordionBlock',
    label: 'Acorde√£o',
    category: 'content',
    icon: 'ChevronDown',
    defaultProps: {
      title: '',
      subtitle: '',
      items: [
        { title: 'Item 1', content: 'Conte√∫do do primeiro item' },
        { title: 'Item 2', content: 'Conte√∫do do segundo item' },
      ],
      allowMultiple: false,
      defaultOpen: -1,
      variant: 'default',
      backgroundColor: 'transparent',
      accentColor: '',
    },
    propsSchema: {
      title: { type: 'string', label: 'T√≠tulo' },
      subtitle: { type: 'string', label: 'Subt√≠tulo' },
      items: { type: 'array', label: 'Itens' },
      allowMultiple: { type: 'boolean', label: 'Permitir M√∫ltiplos Abertos' },
      defaultOpen: { type: 'number', label: 'Item Aberto por Padr√£o (-1 = nenhum)' },
      variant: { type: 'select', label: 'Estilo', options: [{ label: 'Padr√£o', value: 'default' }, { label: 'Separado', value: 'separated' }, { label: 'Com Borda', value: 'bordered' }] },
      backgroundColor: { type: 'color', label: 'Cor de Fundo' },
      accentColor: { type: 'color', label: 'Cor de Destaque' },
    },
    canHaveChildren: false,
    isRemovable: true,
  },
  // ========== MEDIA CAROUSEL BLOCKS ==========
  {
    type: 'VideoCarousel',
    label: 'Carrossel de V√≠deos',
    category: 'media',
    icon: 'Film',
    defaultProps: {
      title: '',
      videos: [],
      autoplay: false,
      showControls: true,
      aspectRatio: '16:9',
    },
    propsSchema: {
      title: { type: 'string', label: 'T√≠tulo' },
      videos: { type: 'array', label: 'V√≠deos', helpText: 'YouTube URLs ou v√≠deos via upload' },
      autoplay: { type: 'boolean', label: 'Autoplay' },
      showControls: { type: 'boolean', label: 'Mostrar Controles' },
      aspectRatio: { 
        type: 'select', 
        label: 'Propor√ß√£o', 
        options: [
          { label: '16:9', value: '16:9' }, 
          { label: '4:3', value: '4:3' }, 
          { label: '1:1', value: '1:1' },
        ],
      },
    },
    canHaveChildren: false,
    isRemovable: true,
  },
  {
    type: 'ImageCarousel',
    label: 'Carrossel de Imagens',
    category: 'media',
    icon: 'Images',
    defaultProps: {
      title: '',
      images: [],
      autoplay: false,
      autoplayInterval: 5,
      showArrows: true,
      showDots: true,
      enableLightbox: false,
      aspectRatio: '16:9',
      slidesPerView: 1,
      gap: 'md',
    },
    propsSchema: {
      title: { type: 'string', label: 'T√≠tulo' },
      images: { type: 'array', label: 'Imagens', helpText: 'Adicione imagens para Desktop e Mobile' },
      autoplay: { type: 'boolean', label: 'Autoplay' },
      autoplayInterval: { 
        type: 'number', 
        label: 'Intervalo de Autoplay (segundos)', 
        defaultValue: 5, 
        min: 1, 
        max: 30,
      },
      showArrows: { type: 'boolean', label: 'Mostrar Setas' },
      showDots: { type: 'boolean', label: 'Mostrar Indicadores' },
      enableLightbox: { type: 'boolean', label: 'Habilitar Lightbox' },
      aspectRatio: { 
        type: 'select', 
        label: 'Propor√ß√£o', 
        options: [
          { label: '16:9', value: '16:9' }, 
          { label: '4:3', value: '4:3' }, 
          { label: '1:1', value: '1:1' },
          { label: '21:9', value: '21:9' },
          { label: 'Auto', value: 'auto' },
        ],
      },
      slidesPerView: { 
        type: 'select', 
        label: 'Slides por Visualiza√ß√£o', 
        options: [
          { label: '1', value: '1' }, 
          { label: '2', value: '2' }, 
          { label: '3', value: '3' },
          { label: '4', value: '4' },
        ],
      },
      gap: { 
        type: 'select', 
        label: 'Espa√ßamento', 
        options: [
          { label: 'Pequeno', value: 'sm' }, 
          { label: 'M√©dio', value: 'md' }, 
          { label: 'Grande', value: 'lg' },
        ],
      },
    },
    canHaveChildren: false,
    isRemovable: true,
  },

  // ========== INTERACTIVE BLOCKS ==========
  {
    type: 'Newsletter',
    label: 'Newsletter',
    category: 'content',
    icon: 'Mail',
    defaultProps: {
      title: 'Receba nossas novidades',
      subtitle: 'Cadastre-se e receba ofertas exclusivas em primeira m√£o!',
      placeholder: 'Digite seu e-mail',
      buttonText: 'Inscrever-se',
      successMessage: 'Obrigado! Voc√™ foi inscrito com sucesso.',
      layout: 'horizontal',
      showIcon: true,
      showIncentive: false,
      incentiveText: 'üéÅ Ganhe 10% OFF na primeira compra!',
      backgroundColor: '',
      textColor: '',
      buttonBgColor: '',
      buttonTextColor: '',
    },
    propsSchema: {
      title: { type: 'string', label: 'T√≠tulo', defaultValue: 'Receba nossas novidades' },
      subtitle: { type: 'string', label: 'Subt√≠tulo' },
      placeholder: { type: 'string', label: 'Placeholder', defaultValue: 'Digite seu e-mail' },
      buttonText: { type: 'string', label: 'Texto do Bot√£o', defaultValue: 'Inscrever-se' },
      successMessage: { type: 'string', label: 'Mensagem de Sucesso' },
      layout: {
        type: 'select',
        label: 'Layout',
        defaultValue: 'horizontal',
        options: [
          { label: 'Horizontal', value: 'horizontal' },
          { label: 'Vertical', value: 'vertical' },
          { label: 'Card', value: 'card' },
        ],
      },
      showIcon: { type: 'boolean', label: 'Mostrar √çcone', defaultValue: true },
      showIncentive: { type: 'boolean', label: 'Mostrar Incentivo', defaultValue: false },
      incentiveText: { type: 'string', label: 'Texto do Incentivo' },
      backgroundColor: { type: 'color', label: 'Cor de Fundo' },
      textColor: { type: 'color', label: 'Cor do Texto' },
      buttonBgColor: { type: 'color', label: 'Cor do Bot√£o' },
      buttonTextColor: { type: 'color', label: 'Cor do Texto do Bot√£o' },
    },
    canHaveChildren: false,
    isRemovable: true,
  },
  {
    type: 'ContactForm',
    label: 'Formul√°rio de Contato',
    category: 'content',
    icon: 'MessageSquare',
    defaultProps: {
      title: 'Entre em Contato',
      subtitle: 'Preencha o formul√°rio abaixo e entraremos em contato em breve.',
      layout: 'simple',
      showName: true,
      showPhone: false,
      showSubject: true,
      nameLabel: 'Nome',
      emailLabel: 'E-mail',
      phoneLabel: 'Telefone',
      subjectLabel: 'Assunto',
      messageLabel: 'Mensagem',
      buttonText: 'Enviar Mensagem',
      successMessage: 'Mensagem enviada com sucesso! Entraremos em contato em breve.',
      showContactInfo: true,
      contactEmail: 'contato@sualoja.com',
      contactPhone: '(11) 99999-9999',
      contactAddress: 'Rua Exemplo, 123 - S√£o Paulo, SP',
      contactHours: 'Seg - Sex: 9h √†s 18h',
      backgroundColor: '',
      textColor: '',
      buttonBgColor: '',
      buttonTextColor: '',
    },
    propsSchema: {
      title: { type: 'string', label: 'T√≠tulo' },
      subtitle: { type: 'string', label: 'Subt√≠tulo' },
      layout: {
        type: 'select',
        label: 'Layout',
        defaultValue: 'simple',
        options: [
          { label: 'Simples', value: 'simple' },
          { label: 'Com Informa√ß√µes', value: 'with-info' },
          { label: 'Lado a Lado', value: 'split' },
        ],
      },
      showName: { type: 'boolean', label: 'Campo Nome', defaultValue: true },
      showPhone: { type: 'boolean', label: 'Campo Telefone', defaultValue: false },
      showSubject: { type: 'boolean', label: 'Campo Assunto', defaultValue: true },
      nameLabel: { type: 'string', label: 'Label Nome' },
      emailLabel: { type: 'string', label: 'Label E-mail' },
      phoneLabel: { type: 'string', label: 'Label Telefone' },
      subjectLabel: { type: 'string', label: 'Label Assunto' },
      messageLabel: { type: 'string', label: 'Label Mensagem' },
      buttonText: { type: 'string', label: 'Texto do Bot√£o' },
      successMessage: { type: 'string', label: 'Mensagem de Sucesso' },
      showContactInfo: { type: 'boolean', label: 'Mostrar Info de Contato', defaultValue: true },
      contactEmail: { type: 'string', label: 'E-mail de Contato' },
      contactPhone: { type: 'string', label: 'Telefone de Contato' },
      contactAddress: { type: 'string', label: 'Endere√ßo' },
      contactHours: { type: 'string', label: 'Hor√°rio de Atendimento' },
      backgroundColor: { type: 'color', label: 'Cor de Fundo' },
      textColor: { type: 'color', label: 'Cor do Texto' },
      buttonBgColor: { type: 'color', label: 'Cor do Bot√£o' },
      buttonTextColor: { type: 'color', label: 'Cor do Texto do Bot√£o' },
    },
    canHaveChildren: false,
    isRemovable: true,
  },
  {
    type: 'Map',
    label: 'Mapa',
    category: 'content',
    icon: 'MapPin',
    defaultProps: {
      title: '',
      subtitle: '',
      address: 'Av. Paulista, 1000 - S√£o Paulo, SP',
      embedUrl: '',
      latitude: '',
      longitude: '',
      zoom: 15,
      height: 'md',
      showAddress: true,
      showDirectionsButton: true,
      directionsButtonText: 'Como Chegar',
      layout: 'full',
      showContactInfo: true,
      contactTitle: 'Nosso Endere√ßo',
      contactAddress: 'Av. Paulista, 1000 - Bela Vista, S√£o Paulo - SP',
      contactPhone: '(11) 99999-9999',
      contactEmail: 'contato@sualoja.com',
      contactHours: 'Seg - Sex: 9h √†s 18h',
      rounded: true,
      shadow: true,
      backgroundColor: '',
    },
    propsSchema: {
      title: { type: 'string', label: 'T√≠tulo' },
      subtitle: { type: 'string', label: 'Subt√≠tulo' },
      address: { type: 'string', label: 'Endere√ßo para o Mapa' },
      embedUrl: { type: 'string', label: 'URL do Embed (opcional)', placeholder: 'Cole o URL de incorpora√ß√£o do Google Maps' },
      latitude: { type: 'string', label: 'Latitude (opcional)' },
      longitude: { type: 'string', label: 'Longitude (opcional)' },
      zoom: { type: 'number', label: 'Zoom', defaultValue: 15, min: 1, max: 20 },
      height: {
        type: 'select',
        label: 'Altura',
        defaultValue: 'md',
        options: [
          { label: 'Pequeno', value: 'sm' },
          { label: 'M√©dio', value: 'md' },
          { label: 'Grande', value: 'lg' },
          { label: 'Extra Grande', value: 'xl' },
        ],
      },
      showAddress: { type: 'boolean', label: 'Mostrar Endere√ßo', defaultValue: true },
      showDirectionsButton: { type: 'boolean', label: 'Bot√£o "Como Chegar"', defaultValue: true },
      directionsButtonText: { type: 'string', label: 'Texto do Bot√£o' },
      layout: {
        type: 'select',
        label: 'Layout',
        defaultValue: 'full',
        options: [
          { label: 'Largura Total', value: 'full' },
          { label: 'Com Informa√ß√µes', value: 'with-info' },
          { label: 'Lado a Lado', value: 'side-by-side' },
        ],
      },
      showContactInfo: { type: 'boolean', label: 'Mostrar Info de Contato', defaultValue: true },
      contactTitle: { type: 'string', label: 'T√≠tulo da Se√ß√£o' },
      contactAddress: { type: 'string', label: 'Endere√ßo Completo' },
      contactPhone: { type: 'string', label: 'Telefone' },
      contactEmail: { type: 'string', label: 'E-mail' },
      contactHours: { type: 'string', label: 'Hor√°rio' },
      rounded: { type: 'boolean', label: 'Bordas Arredondadas', defaultValue: true },
      shadow: { type: 'boolean', label: 'Sombra', defaultValue: true },
      backgroundColor: { type: 'color', label: 'Cor de Fundo' },
    },
    canHaveChildren: false,
    isRemovable: true,
  },
  {
    type: 'SocialFeed',
    label: 'Feed Social',
    category: 'content',
    icon: 'Instagram',
    defaultProps: {
      title: 'Siga-nos no Instagram',
      subtitle: 'Acompanhe as novidades e compartilhe seus momentos conosco!',
      platform: 'instagram',
      layout: 'grid',
      columns: 6,
      showCaption: false,
      showStats: true,
      maxPosts: 6,
      posts: [],
      showProfile: true,
      profileUsername: '@sualoja',
      profileUrl: 'https://instagram.com/sualoja',
      followButtonText: 'Seguir',
      gap: 'sm',
      rounded: true,
      hoverEffect: true,
      backgroundColor: '',
    },
    propsSchema: {
      title: { type: 'string', label: 'T√≠tulo' },
      subtitle: { type: 'string', label: 'Subt√≠tulo' },
      platform: {
        type: 'select',
        label: 'Plataforma',
        defaultValue: 'instagram',
        options: [
          { label: 'Instagram', value: 'instagram' },
          { label: 'Facebook', value: 'facebook' },
          { label: 'Twitter', value: 'twitter' },
        ],
      },
      layout: {
        type: 'select',
        label: 'Layout',
        defaultValue: 'grid',
        options: [
          { label: 'Grade', value: 'grid' },
          { label: 'Carrossel', value: 'carousel' },
          { label: 'Masonry', value: 'masonry' },
        ],
      },
      columns: {
        type: 'select',
        label: 'Colunas',
        defaultValue: '6',
        options: [
          { label: '2 Colunas', value: '2' },
          { label: '3 Colunas', value: '3' },
          { label: '4 Colunas', value: '4' },
          { label: '6 Colunas', value: '6' },
        ],
      },
      showCaption: { type: 'boolean', label: 'Mostrar Legenda', defaultValue: false },
      showStats: { type: 'boolean', label: 'Mostrar Curtidas/Coment√°rios', defaultValue: true },
      maxPosts: { type: 'number', label: 'M√°ximo de Posts', defaultValue: 6, min: 2, max: 12 },
      showProfile: { type: 'boolean', label: 'Mostrar Perfil', defaultValue: true },
      profileUsername: { type: 'string', label: 'Nome de Usu√°rio' },
      profileUrl: { type: 'string', label: 'URL do Perfil' },
      followButtonText: { type: 'string', label: 'Texto do Bot√£o Seguir' },
      gap: {
        type: 'select',
        label: 'Espa√ßamento',
        defaultValue: 'sm',
        options: [
          { label: 'Pequeno', value: 'sm' },
          { label: 'M√©dio', value: 'md' },
          { label: 'Grande', value: 'lg' },
        ],
      },
      rounded: { type: 'boolean', label: 'Bordas Arredondadas', defaultValue: true },
      hoverEffect: { type: 'boolean', label: 'Efeito Hover', defaultValue: true },
      backgroundColor: { type: 'color', label: 'Cor de Fundo' },
    },
    canHaveChildren: false,
    isRemovable: true,
  },
  {
    type: 'PersonalizedProducts',
    label: 'Produtos Personalizados',
    category: 'content',
    icon: 'Sparkles',
    defaultProps: {
      title: 'Recomendados para Voc√™',
      subtitle: 'Produtos selecionados com base em suas prefer√™ncias',
      layout: 'grid',
      columns: 4,
    },
    propsSchema: {
      title: { type: 'string', label: 'T√≠tulo' },
      subtitle: { type: 'string', label: 'Subt√≠tulo' },
      layout: {
        type: 'select',
        label: 'Layout',
        defaultValue: 'grid',
        options: [
          { label: 'Grade', value: 'grid' },
          { label: 'Carrossel', value: 'carousel' },
        ],
      },
      columns: {
        type: 'select',
        label: 'Colunas',
        defaultValue: '4',
        options: [
          { label: '2 Colunas', value: '2' },
          { label: '3 Colunas', value: '3' },
          { label: '4 Colunas', value: '4' },
        ],
      },
    },
    canHaveChildren: false,
  },
  {
    type: 'LivePurchases',
    label: 'Comprando Agora',
    category: 'content',
    icon: 'ShoppingCart',
    defaultProps: {
      title: 'Comprando Agora',
      layout: 'cards',
      showStats: true,
      purchasesToday: 127,
      viewersNow: 43,
    },
    propsSchema: {
      title: { type: 'string', label: 'T√≠tulo' },
      layout: {
        type: 'select',
        label: 'Layout',
        defaultValue: 'cards',
        options: [
          { label: 'Cards', value: 'cards' },
          { label: 'Ticker', value: 'ticker' },
          { label: 'Popup', value: 'popup' },
        ],
      },
      showStats: { type: 'boolean', label: 'Mostrar Estat√≠sticas', defaultValue: true },
    },
    canHaveChildren: false,
  },
  {
    type: 'PricingTable',
    label: 'Tabela de Pre√ßos',
    category: 'content',
    icon: 'CreditCard',
    defaultProps: {
      title: 'Escolha o Plano Ideal',
      subtitle: 'Comece gratuitamente e escale conforme cresce',
      layout: 'cards',
      showAnnualToggle: true,
      annualDiscount: 20,
    },
    propsSchema: {
      title: { type: 'string', label: 'T√≠tulo' },
      subtitle: { type: 'string', label: 'Subt√≠tulo' },
      layout: {
        type: 'select',
        label: 'Layout',
        defaultValue: 'cards',
        options: [
          { label: 'Cards', value: 'cards' },
          { label: 'Tabela', value: 'table' },
        ],
      },
      showAnnualToggle: { type: 'boolean', label: 'Toggle Mensal/Anual', defaultValue: true },
      annualDiscount: { type: 'number', label: 'Desconto Anual (%)', defaultValue: 20, min: 0, max: 50 },
    },
    canHaveChildren: false,
  },
  {
    type: 'PopupModal',
    label: 'Popup/Modal',
    category: 'content',
    icon: 'Bell',
    defaultProps: {
      title: 'Receba Ofertas Exclusivas!',
      subtitle: 'Cadastre-se e ganhe 10% de desconto na primeira compra',
      type: 'newsletter',
      layout: 'centered',
      showEmailInput: true,
      buttonText: 'Quero meu desconto!',
      discountCode: 'BEMVINDO10',
    },
    propsSchema: {
      title: { type: 'string', label: 'T√≠tulo' },
      subtitle: { type: 'string', label: 'Subt√≠tulo' },
      type: {
        type: 'select',
        label: 'Tipo',
        defaultValue: 'newsletter',
        options: [
          { label: 'Newsletter', value: 'newsletter' },
          { label: 'Promo√ß√£o', value: 'promotion' },
          { label: 'An√∫ncio', value: 'announcement' },
        ],
      },
      layout: {
        type: 'select',
        label: 'Layout',
        defaultValue: 'centered',
        options: [
          { label: 'Centralizado', value: 'centered' },
          { label: 'Com Imagem', value: 'side-image' },
          { label: 'Canto', value: 'corner' },
        ],
      },
      showEmailInput: { type: 'boolean', label: 'Mostrar Campo Email', defaultValue: true },
      buttonText: { type: 'string', label: 'Texto do Bot√£o' },
      discountCode: { type: 'string', label: 'C√≥digo de Desconto' },
    },
    canHaveChildren: false,
  },

  // ========== OFFER SLOT BLOCKS ==========
  {
    type: 'CompreJuntoSlot',
    label: 'Compre Junto',
    category: 'ecommerce',
    icon: 'ShoppingBag',
    defaultProps: {},
    propsSchema: {}, // Settings managed in Theme Settings > P√°ginas > Produto
    canHaveChildren: false,
  },
  {
    type: 'CrossSellSlot',
    label: 'Sugest√µes no Carrinho',
    category: 'ecommerce',
    icon: 'Gift',
    defaultProps: {},
    propsSchema: {}, // Settings managed in Theme Settings > P√°ginas > Carrinho
    canHaveChildren: false,
  },
  // NOTE: OrderBumpSlot was REMOVED - duplicated logic with CheckoutContent's internal OrderBumpSection
  // Order Bump is now handled ONLY internally by Checkout block, controlled by showOrderBump toggle
  
  // ========== FORMS BLOCKS (Formul√°rios) ==========
  {
    type: 'NewsletterForm',
    label: 'Formul√°rio Newsletter',
    category: 'utilities',
    icon: 'Mail',
    defaultProps: {
      listId: '',
      title: 'Receba nossas novidades',
      subtitle: 'Cadastre-se para receber ofertas exclusivas',
      showName: true,
      showPhone: false,
      showBirthDate: false,
      buttonText: 'Cadastrar',
      successMessage: 'Cadastro realizado com sucesso!',
      // Customiza√ß√£o visual
      layout: 'vertical',
      alignment: 'center',
      backgroundColor: 'transparent',
      textColor: '',
      buttonColor: '',
      buttonTextColor: '',
      borderRadius: 8,
      inputStyle: 'outline',
    },
    propsSchema: {
      listId: {
        type: 'emailList',
        label: 'Lista de Email',
        placeholder: 'Selecione uma lista',
        required: true,
        helpText: 'Crie listas no m√≥dulo Email Marketing',
      },
      title: { type: 'string', label: 'T√≠tulo', defaultValue: 'Receba nossas novidades' },
      subtitle: { type: 'string', label: 'Subt√≠tulo', defaultValue: 'Cadastre-se para receber ofertas exclusivas' },
      showName: { type: 'boolean', label: 'Mostrar campo Nome', defaultValue: true },
      showPhone: { type: 'boolean', label: 'Mostrar campo Telefone', defaultValue: false },
      showBirthDate: { type: 'boolean', label: 'Mostrar campo Data de Nascimento', defaultValue: false },
      buttonText: { type: 'string', label: 'Texto do Bot√£o', defaultValue: 'Cadastrar' },
      successMessage: { type: 'string', label: 'Mensagem de Sucesso', defaultValue: 'Cadastro realizado com sucesso!' },
      layout: {
        type: 'select',
        label: 'Layout',
        defaultValue: 'vertical',
        options: [
          { label: 'Vertical', value: 'vertical' },
          { label: 'Horizontal', value: 'horizontal' },
        ],
      },
      alignment: {
        type: 'select',
        label: 'Alinhamento',
        defaultValue: 'center',
        options: [
          { label: 'Esquerda', value: 'left' },
          { label: 'Centro', value: 'center' },
          { label: 'Direita', value: 'right' },
        ],
      },
      backgroundColor: { type: 'color', label: 'Cor de Fundo', defaultValue: 'transparent' },
      textColor: { type: 'color', label: 'Cor do Texto', placeholder: 'Padr√£o do tema' },
      buttonColor: { type: 'color', label: 'Cor do Bot√£o', placeholder: 'Padr√£o do tema' },
      buttonTextColor: { type: 'color', label: 'Cor do Texto do Bot√£o', placeholder: 'Padr√£o do tema' },
      borderRadius: { type: 'number', label: 'Arredondamento (px)', defaultValue: 8, min: 0, max: 32 },
      inputStyle: {
        type: 'select',
        label: 'Estilo dos Campos',
        defaultValue: 'outline',
        options: [
          { label: 'Contorno', value: 'outline' },
          { label: 'Preenchido', value: 'filled' },
          { label: 'Sublinhado', value: 'underline' },
        ],
      },
    },
    canHaveChildren: false,
  },
  {
    type: 'NewsletterPopup',
    label: 'Popup Newsletter',
    category: 'utilities',
    icon: 'MessageSquare',
    defaultProps: {
      listId: '',
      title: 'N√£o perca nossas ofertas!',
      subtitle: 'Cadastre-se e ganhe 10% de desconto',
      showName: true,
      showPhone: false,
      showBirthDate: false,
      buttonText: 'Quero meu desconto',
      successMessage: 'Cadastro realizado com sucesso!',
      // Trigger settings
      triggerType: 'delay',
      delaySeconds: 5,
      scrollPercentage: 50,
      // Display settings
      showOnPages: 'all',
      pageTypes: [],
      showOnMobile: true,
      frequency: 'once',
      // Visual
      overlayColor: 'rgba(0,0,0,0.5)',
      popupBgColor: '',
      popupTextColor: '',
      buttonColor: '',
      buttonTextColor: '',
      borderRadius: 16,
      showCloseButton: true,
    },
    propsSchema: {
      listId: {
        type: 'string',
        label: 'Lista de Email',
        placeholder: 'Selecione uma lista',
        required: true,
        helpText: 'Crie listas no m√≥dulo Email Marketing',
      },
      title: { type: 'string', label: 'T√≠tulo', defaultValue: 'N√£o perca nossas ofertas!' },
      subtitle: { type: 'string', label: 'Subt√≠tulo', defaultValue: 'Cadastre-se e ganhe 10% de desconto' },
      showName: { type: 'boolean', label: 'Mostrar campo Nome', defaultValue: true },
      showPhone: { type: 'boolean', label: 'Mostrar campo Telefone', defaultValue: false },
      showBirthDate: { type: 'boolean', label: 'Mostrar campo Data de Nascimento', defaultValue: false },
      buttonText: { type: 'string', label: 'Texto do Bot√£o', defaultValue: 'Quero meu desconto' },
      successMessage: { type: 'string', label: 'Mensagem de Sucesso', defaultValue: 'Cadastro realizado com sucesso!' },
      triggerType: {
        type: 'select',
        label: 'Gatilho de Exibi√ß√£o',
        defaultValue: 'delay',
        options: [
          { label: 'Ap√≥s X segundos', value: 'delay' },
          { label: 'Ao rolar X%', value: 'scroll' },
          { label: 'Inten√ß√£o de sa√≠da', value: 'exit_intent' },
        ],
      },
      delaySeconds: {
        type: 'number',
        label: 'Atraso (segundos)',
        defaultValue: 5,
        min: 1,
        max: 120,
        showWhen: { triggerType: 'delay' },
      },
      scrollPercentage: {
        type: 'number',
        label: 'Porcentagem de Scroll',
        defaultValue: 50,
        min: 10,
        max: 100,
        showWhen: { triggerType: 'scroll' },
      },
      showOnPages: {
        type: 'select',
        label: 'Exibir em',
        defaultValue: 'all',
        options: [
          { label: 'Todas as p√°ginas', value: 'all' },
          { label: 'P√°ginas espec√≠ficas', value: 'specific' },
          { label: 'Apenas esta p√°gina', value: 'current' },
        ],
      },
      showOnMobile: { type: 'boolean', label: 'Mostrar no Mobile', defaultValue: true },
      frequency: {
        type: 'select',
        label: 'Frequ√™ncia',
        defaultValue: 'once',
        options: [
          { label: 'Uma vez por sess√£o', value: 'once' },
          { label: 'Uma vez por dia', value: 'daily' },
          { label: 'Sempre', value: 'always' },
        ],
      },
      overlayColor: { type: 'color', label: 'Cor do Overlay', defaultValue: 'rgba(0,0,0,0.5)' },
      popupBgColor: { type: 'color', label: 'Cor de Fundo do Popup', placeholder: 'Padr√£o do tema' },
      popupTextColor: { type: 'color', label: 'Cor do Texto', placeholder: 'Padr√£o do tema' },
      buttonColor: { type: 'color', label: 'Cor do Bot√£o', placeholder: 'Padr√£o do tema' },
      buttonTextColor: { type: 'color', label: 'Cor do Texto do Bot√£o', placeholder: 'Padr√£o do tema' },
      borderRadius: { type: 'number', label: 'Arredondamento (px)', defaultValue: 16, min: 0, max: 48 },
      showCloseButton: { type: 'boolean', label: 'Mostrar bot√£o fechar', defaultValue: true },
    },
    canHaveChildren: false,
  },
  {
    type: 'QuizEmbed',
    label: 'Quiz Interativo',
    category: 'utilities',
    icon: 'ClipboardList',
    defaultProps: {
      quizId: '',
      showTitle: true,
      showDescription: true,
      style: 'card',
    },
    propsSchema: {
      quizId: {
        type: 'string',
        label: 'Quiz',
        placeholder: 'Selecione um quiz',
        required: true,
        helpText: 'Crie quizzes no m√≥dulo Marketing > Quiz',
      },
      showTitle: { type: 'boolean', label: 'Mostrar T√≠tulo', defaultValue: true },
      showDescription: { type: 'boolean', label: 'Mostrar Descri√ß√£o', defaultValue: true },
      style: {
        type: 'select',
        label: 'Estilo',
        defaultValue: 'card',
        options: [
          { label: 'Card', value: 'card' },
          { label: 'Inline', value: 'inline' },
          { label: 'Fullwidth', value: 'fullwidth' },
        ],
      },
    },
    canHaveChildren: false,
  },

  {
    type: 'UpsellSlot',
    label: 'Oferta P√≥s-Compra',
    category: 'ecommerce',
    icon: 'TrendingUp',
    defaultProps: {},
    propsSchema: {}, // Settings managed in Theme Settings > P√°ginas > Obrigado
    canHaveChildren: false,
  },
];

// Registry class
class BlockRegistry {
  private blocks: Map<string, BlockDefinition> = new Map();

  constructor() {
    blockDefinitions.forEach(block => {
      this.blocks.set(block.type, block);
    });
  }

  get(type: string): BlockDefinition | undefined {
    return this.blocks.get(type);
  }

  getAll(): BlockDefinition[] {
    return Array.from(this.blocks.values());
  }

  getByCategory(category: BlockCategory): BlockDefinition[] {
    return this.getAll().filter(block => block.category === category);
  }

  getCategorizedBlocks(): Record<BlockCategory, BlockDefinition[]> {
    return {
      layout: this.getByCategory('layout'),
      'header-footer': this.getByCategory('header-footer'),
      content: this.getByCategory('content'),
      media: this.getByCategory('media'),
      ecommerce: this.getByCategory('ecommerce'),
      utilities: this.getByCategory('utilities'),
    };
  }

  exists(type: string): boolean {
    return this.blocks.has(type);
  }

  createDefaultNode(type: string): BlockNode | null {
    const definition = this.get(type);
    if (!definition) return null;

    return {
      id: `${type.toLowerCase()}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,
      type,
      props: { ...definition.defaultProps },
      children: definition.canHaveChildren ? [] : undefined,
    };
  }
}

// Singleton instance
export const blockRegistry = new BlockRegistry();

// Category labels
export const categoryLabels: Record<BlockCategory, string> = {
  layout: 'Layout',
  'header-footer': 'Cabe√ßalho / Rodap√©',
  content: 'Conte√∫do',
  media: 'M√≠dia',
  ecommerce: 'E-commerce',
  utilities: 'Utilit√°rios',
};
